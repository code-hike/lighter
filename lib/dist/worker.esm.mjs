import e from"./onig.wasm?module";async function t(e){throw new Error("no fs")}async function s(e){console.warn(`Code Hike warning: Fetching resource from network "${e}"`);const t=await fetch(`https://lighter.codehike.org/${e}.json`);if(t.ok)return await t.json()}const r=e=>/^#([A-Fa-f0-9]{3,4}){1,2}$/.test(e),o=(e,t)=>e.match(new RegExp(`.{${t}}`,"g")),n=e=>parseInt(e.repeat(2/e.length),16);function c(e,t){return void 0!==e?e/255:"number"!=typeof t||t<0||t>1?1:t}function i(e,t){if(!e)return e;const{r:s,g:i,b:a,a:u}=function(e){if(!e)return;if(!r(e))throw new Error("Invalid color string, must be a valid hex color");const t=Math.floor((e.length-1)/3),s=o(e.slice(1),t),[i,a,u,l]=s.map(n);return{r:i,g:a,b:u,a:c(l,1)}}(e);return function(e){if(!e)return;const{r:t,g:s,b:r,a:o}=e,n=Math.round(255*o);return`#${t.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`}({r:s,g:i,b:a,a:u*t})}function a(e){return"from-css"===e.type?"var(--ch-0)":e.type}function u(e,t){const s=e.colors||{};if(s[t])return s[t];const r=d[t];if(!r)throw new Error(`Unknown theme color key: ${t}`);return"string"==typeof r?u(e,r):function(e,t){const s=t[e.type];if(Array.isArray(s)){const[t,r,...o]=s;return t(u(e,r),...o)}return s}(e,r)}const l="#6FC3DF",d={"editor.foreground":{dark:"#bbbbbb",light:"#333333",hc:"#ffffff"},"editorLineNumber.foreground":{dark:"#858585",light:"#237893",hc:"#fffffe"},"editor.selectionBackground":{light:"#ADD6FF",dark:"#264F78",hc:"#f3f518"},"editor.background":{light:"#fffffe",dark:"#1E1E1E",hc:"#000000"},"editorGroupHeader.tabsBackground":{dark:"#252526",light:"#F3F3F3"},"tab.activeBackground":"editor.background","tab.activeForeground":{dark:"#ffffff",light:"#333333",hc:"#ffffff"},"tab.border":{dark:"#252526",light:"#F3F3F3",hc:l},"tab.activeBorder":"tab.activeBackground","tab.inactiveBackground":{dark:"#2D2D2D",light:"#ECECEC"},"tab.inactiveForeground":{dark:[i,"tab.activeForeground",.5],light:[i,"tab.activeForeground",.5],hc:"#ffffff"},"diffEditor.insertedTextBackground":{dark:"#9ccc2c33",light:"#9ccc2c40"},"diffEditor.removedTextBackground":{dark:"#ff000033",light:"#ff000033"},"diffEditor.insertedLineBackground":{dark:"#9bb95533",light:"#9bb95533"},"diffEditor.removedLineBackground":{dark:"#ff000033",light:"#ff000033"},"icon.foreground":{dark:"#C5C5C5",light:"#424242",hc:"#FFFFFF"},"sideBar.background":{dark:"#252526",light:"#F3F3F3",hc:"#000000"},"sideBar.foreground":"editor.foreground","sideBar.border":"sideBar.background","list.inactiveSelectionBackground":{dark:"#37373D",light:"#E4E6F1"},"list.inactiveSelectionForeground":{},"list.hoverBackground":{dark:"#2A2D2E",light:"#F0F0F0"},"list.hoverForeground":{},"editorGroupHeader.tabsBorder":{hc:l},"tab.activeBorderTop":{hc:l},"tab.hoverBackground":"tab.inactiveBackground","tab.hoverForeground":"tab.inactiveForeground","editor.rangeHighlightBackground":{dark:"#ffffff0b",light:"#fdff0033"},"editor.infoForeground":{dark:"#3794FF",light:"#1a85ff",hc:"#3794FF"},"input.border":{hc:l},"input.background":{dark:"#3C3C3C",light:"#fffffe",hc:"#000000"},"input.foreground":"editor.foreground","editor.lineHighlightBackground":{},focusBorder:{light:"#0090F1",dark:"#007FD4",hc:l},"editorGroup.border":{dark:"#444444",light:"#E7E7E7",hc:l},"list.activeSelectionBackground":{dark:"#094771",light:"#0060C0",hc:"#000000"},"list.activeSelectionForeground":{dark:"#fffffe",light:"#fffffe",hc:"#fffffe"},"lighter.inlineBackground":{dark:[i,"editor.background",.9],light:[i,"editor.background",.9]},"terminal.background":"editor.background","terminal.foreground":"editor.foreground","terminal.ansiBlack":{dark:"#000000",light:"#000000",hc:"#000000"},"terminal.ansiRed":{dark:"#cd3131",light:"#cd3131",hc:"#cd0000"},"terminal.ansiGreen":{dark:"#0DBC79",light:"#00BC00",hc:"#00cd00"},"terminal.ansiYellow":{dark:"#e5e510",light:"#949800",hc:"#cdcd00"},"terminal.ansiBlue":{dark:"#2472c8",light:"#0451a5",hc:"#0000ee"},"terminal.ansiMagenta":{dark:"#bc3fbc",light:"#bc05bc",hc:"#cd00cd"},"terminal.ansiCyan":{dark:"#11a8cd",light:"#0598bc",hc:"#00cdcd"},"terminal.ansiWhite":{dark:"#e5e5e5",light:"#555555",hc:"#e5e5e5"},"terminal.ansiBrightBlack":{dark:"#666666",light:"#666666",hc:"#7f7f7f"},"terminal.ansiBrightRed":{dark:"#f14c4c",light:"#cd3131",hc:"#ff0000"},"terminal.ansiBrightGreen":{dark:"#23d18b",light:"#14CE14",hc:"#00ff00"},"terminal.ansiBrightYellow":{dark:"#f5f543",light:"#b5ba00",hc:"#ffff00"},"terminal.ansiBrightBlue":{dark:"#3b8eea",light:"#0451a5",hc:"#5c5cff"},"terminal.ansiBrightMagenta":{dark:"#d670d6",light:"#bc05bc",hc:"#ff00ff"},"terminal.ansiBrightCyan":{dark:"#29b8db",light:"#0598bc",hc:"#00ffff"},"terminal.ansiBrightWhite":{dark:"#e5e5e5",light:"#a5a5a5",hc:"#ffffff"}},h=new Map,p=new Map;async function m(e){if("string"==typeof e){const t=e;if(!b.includes(t))throw new y(t);if(!h.has(t)){const e=async function(e){try{return await async function(e){throw new Error("no fs")}()}catch(t){return await s(`themes/${e}`)}}(t).then((e=>(p.set(t,e),e)));h.set(t,e)}return h.get(t)}return e}function f(e){let t=null;if("string"==typeof e){if(t=p.get(e),!t)throw new Error("Syntax highlighting error: theme not loaded")}else t=e;return function(e){if(!e)return;const t=e.settings||e.tokenColors||[],s={name:e.name||"unknown-theme",type:g(e),foreground:"",background:"",settings:t,colors:e.colors||{},colorNames:e.colorNames},r=t.find((e=>!e.scope));if(r){const{foreground:e,background:t}=(null==r?void 0:r.settings)||{},o={};e&&!s.colors["editor.foreground"]&&(o["editor.foreground"]=e),t&&!s.colors["editor.background"]&&(o["editor.background"]=t),Object.keys(o).length>0&&(s.colors=Object.assign(Object.assign({},s.colors),o)),s.foreground=e,s.background=t}r||(s.settings=[{settings:{foreground:u(s,"editor.foreground"),background:u(s,"editor.background")}},...s.settings]);if(s.background=s.background||u(s,"editor.background"),s.foreground=s.foreground||u(s,"editor.foreground"),"from-css"===e.type&&!s.colorNames){const e={};let t=0;s.settings=s.settings.map((s=>{const r=Object.assign(Object.assign({},s),{settings:Object.assign({},s.settings)}),{foreground:o,background:n}=r.settings||{};return o&&!e[o]&&(e[o]=`#${t.toString(16).padStart(6,"0")}`,t++),n&&!e[n]&&(e[n]=`#${t.toString(16).padStart(6,"0")}`,t++),o&&(r.settings.foreground=e[o]),n&&(r.settings.background=e[n]),r})),s.colorNames=e}return s}(t)}function g(e){var t;if("from-css"===e.type)return"from-css";return"light"===(e.type?e.type:(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes("light"))?"light":"dark")?"light":"dark"}const b=["dark-plus","dracula-soft","dracula","github-dark","github-dark-dimmed","github-from-css","github-light","light-plus","material-darker","material-default","material-from-css","material-lighter","material-ocean","material-palenight","min-dark","min-light","monokai","nord","one-dark-pro","poimandres","slack-dark","slack-ochin","solarized-dark","solarized-light"];class y extends Error{constructor(e){super(`Unknown theme: ${e}`),this.theme=e}}function _(e){const t=t=>"colorScheme"===t?a(e):"foreground"===t?e.foreground:"background"===t?e.background:u(e,t);return{colorScheme:t("colorScheme"),foreground:t("foreground"),background:t("background"),lighter:{inlineBackground:t("lighter.inlineBackground")},editor:{background:t("editor.background"),foreground:t("editor.foreground"),lineHighlightBackground:t("editor.lineHighlightBackground"),rangeHighlightBackground:t("editor.rangeHighlightBackground"),infoForeground:t("editor.infoForeground"),selectionBackground:t("editor.selectionBackground")},focusBorder:t("focusBorder"),tab:{activeBackground:t("tab.activeBackground"),activeForeground:t("tab.activeForeground"),inactiveBackground:t("tab.inactiveBackground"),inactiveForeground:t("tab.inactiveForeground"),border:t("tab.border"),activeBorder:t("tab.activeBorder"),activeBorderTop:t("tab.activeBorderTop")},editorGroup:{border:t("editorGroup.border")},editorGroupHeader:{tabsBackground:t("editorGroupHeader.tabsBackground")},editorLineNumber:{foreground:t("editorLineNumber.foreground")},input:{background:t("input.background"),foreground:t("input.foreground"),border:t("input.border")},icon:{foreground:t("icon.foreground")},sideBar:{background:t("sideBar.background"),foreground:t("sideBar.foreground"),border:t("sideBar.border")},list:{activeSelectionBackground:t("list.activeSelectionBackground"),activeSelectionForeground:t("list.activeSelectionForeground"),hoverBackground:t("list.hoverBackground"),hoverForeground:t("list.hoverForeground")}}}const k=["abap","actionscript-3","ada","adoc","angular-html","angular-ts","apache","apex","apl","applescript","ara","asciidoc","asm","astro","awk","ballerina","bash","bat","batch","be","beancount","berry","bibtex","bicep","blade","c","c#","c++","cadence","cdc","clarity","clj","clojure","closure-templates","cmake","cmd","cobol","codeowners","codeql","coffee","coffeescript","common-lisp","console","cpp","cql","crystal","cs","csharp","css","csv","cue","cypher","d","dart","dax","desktop","diff","docker","dockerfile","dotenv","dream-maker","edge","elisp","elixir","elm","emacs-lisp","erb","erl","erlang","f","f#","f03","f08","f18","f77","f90","f95","fennel","fish","fluent","for","fortran-fixed-form","fortran-free-form","fs","fsharp","fsl","ftl","gdresource","gdscript","gdshader","genie","gherkin","git-commit","git-rebase","gjs","gleam","glimmer-js","glimmer-ts","glsl","gnuplot","go","gql","graphql","groovy","gts","hack","haml","handlebars","haskell","haxe","hbs","hcl","hjson","hlsl","hs","html","html-derivative","http","hxml","hy","imba","ini","jade","java","javascript","jinja","jison","jl","js","json","json5","jsonc","jsonl","jsonnet","jssm","jsx","julia","kotlin","kql","kt","kts","kusto","latex","lean","lean4","less","liquid","lisp","lit","log","logo","lua","luau","make","makefile","markdown","marko","matlab","md","mdc","mdx","mediawiki","mermaid","mojo","move","nar","narrat","nextflow","nf","nginx","nim","nix","nu","nushell","objc","objective-c","objective-cpp","ocaml","pascal","perl","perl6","php","plsql","po","postcss","pot","potx","powerquery","powershell","prisma","prolog","properties","proto","ps","ps1","pug","puppet","purescript","py","python","ql","qml","qmldir","qss","r","racket","raku","razor","rb","reg","regex","regexp","rel","riscv","rs","rst","ruby","rust","sas","sass","scala","scheme","scss","sh","shader","shaderlab","shell","shellscript","shellsession","smalltalk","solidity","soy","sparql","spl","splunk","sql","ssh-config","stata","styl","stylus","svelte","swift","system-verilog","systemd","tasl","tcl","templ","terminal","terraform","tex","text","tf","tfvars","toml","ts","ts-tags","tsp","tsv","tsx","turtle","twig","txt","typ","typescript","typespec","typst","v","vala","vb","verilog","vhdl","vim","viml","vimscript","vue","vue-html","vy","vyper","wasm","wenyan","wgsl","wiki","wikitext","wl","wolfram","xml","xsl","yaml","yml","zenscript","zig","zsh","文言"],S={abap:"source.abap","actionscript-3":"source.actionscript.3",ada:"source.ada","angular-html":"text.html.derivative.ng","angular-ts":"source.ts.ng",apache:"source.apacheconf",apex:"source.apex",apl:"source.apl",applescript:"source.applescript",ara:"source.ara",asciidoc:"text.asciidoc",adoc:"text.asciidoc",asm:"source.asm.x86_64",astro:"source.astro",awk:"source.awk",ballerina:"source.ballerina",bat:"source.batchfile",batch:"source.batchfile",beancount:"text.beancount",berry:"source.berry",be:"source.berry",bibtex:"text.bibtex",bicep:"source.bicep",blade:"text.html.php.blade",c:"source.c",cadence:"source.cadence",cdc:"source.cadence",clarity:"source.clar",clojure:"source.clojure",clj:"source.clojure",cmake:"source.cmake",cobol:"source.cobol",codeowners:"text.codeowners",codeql:"source.ql",ql:"source.ql",coffee:"source.coffee",coffeescript:"source.coffee","common-lisp":"source.commonlisp",lisp:"source.commonlisp",cpp:"source.cpp","c++":"source.cpp",crystal:"source.crystal",csharp:"source.cs","c#":"source.cs",cs:"source.cs",css:"source.css",csv:"text.csv",cue:"source.cue",cypher:"source.cypher",cql:"source.cypher",d:"source.d",dart:"source.dart",dax:"source.dax",desktop:"source.desktop",diff:"source.diff",docker:"source.dockerfile",dockerfile:"source.dockerfile",dotenv:"source.dotenv","dream-maker":"source.dm",edge:"text.html.edge",elixir:"source.elixir",elm:"source.elm","emacs-lisp":"source.emacs.lisp",elisp:"source.emacs.lisp",erb:"text.html.erb",erlang:"source.erlang",erl:"source.erlang",fennel:"source.fnl",fish:"source.fish",fluent:"source.ftl",ftl:"source.ftl","fortran-fixed-form":"source.fortran.fixed",f:"source.fortran.fixed",for:"source.fortran.fixed",f77:"source.fortran.fixed","fortran-free-form":"source.fortran.free",f90:"source.fortran.free",f95:"source.fortran.free",f03:"source.fortran.free",f08:"source.fortran.free",f18:"source.fortran.free",fsharp:"source.fsharp","f#":"source.fsharp",fs:"source.fsharp",gdresource:"source.gdresource",gdscript:"source.gdscript",gdshader:"source.gdshader",genie:"source.genie",gherkin:"text.gherkin.feature","git-commit":"text.git-commit","git-rebase":"text.git-rebase",gleam:"source.gleam","glimmer-js":"source.gjs",gjs:"source.gjs","glimmer-ts":"source.gts",gts:"source.gts",glsl:"source.glsl",gnuplot:"source.gnuplot",go:"source.go",graphql:"source.graphql",gql:"source.graphql",groovy:"source.groovy",hack:"source.hack",haml:"text.haml",handlebars:"text.html.handlebars",hbs:"text.html.handlebars",haskell:"source.haskell",hs:"source.haskell",haxe:"source.hx",hcl:"source.hcl",hjson:"source.hjson",hlsl:"source.hlsl",html:"text.html.basic","html-derivative":"text.html.derivative",http:"source.http",hxml:"source.hxml",hy:"source.hy",imba:"source.imba",ini:"source.ini",properties:"source.ini",java:"source.java",javascript:"source.js",js:"source.js",jinja:"source.jinja",jison:"source.jison",json:"source.json",json5:"source.json5",jsonc:"source.json.comments",jsonl:"source.json.lines",jsonnet:"source.jsonnet",jssm:"source.jssm",fsl:"source.jssm",jsx:"source.js.jsx",julia:"source.julia",jl:"source.julia",kotlin:"source.kotlin",kt:"source.kotlin",kts:"source.kotlin",kusto:"source.kusto",kql:"source.kusto",latex:"text.tex.latex",lean:"source.lean4",lean4:"source.lean4",less:"source.css.less",liquid:"text.html.liquid",log:"text.log",logo:"source.logo",lua:"source.lua",luau:"source.luau",make:"source.makefile",makefile:"source.makefile",markdown:"text.html.markdown",md:"text.html.markdown",marko:"text.marko",matlab:"source.matlab",mdc:"text.markdown.mdc",mdx:"source.mdx",mermaid:"markdown.mermaid.codeblock",mojo:"source.mojo",move:"source.move",narrat:"source.narrat",nar:"source.narrat",nextflow:"source.nextflow",nf:"source.nextflow",nginx:"source.nginx",nim:"source.nim",nix:"source.nix",nushell:"source.nushell",nu:"source.nushell","objective-c":"source.objc",objc:"source.objc","objective-cpp":"source.objcpp",ocaml:"source.ocaml",pascal:"source.pascal",perl:"source.perl",php:"source.php",plsql:"source.plsql.oracle",po:"source.po",pot:"source.po",potx:"source.po",postcss:"source.css.postcss",powerquery:"source.powerquery",powershell:"source.powershell",ps:"source.powershell",ps1:"source.powershell",prisma:"source.prisma",prolog:"source.prolog",proto:"source.proto",pug:"text.pug",jade:"text.pug",puppet:"source.puppet",purescript:"source.purescript",python:"source.python",py:"source.python",qml:"source.qml",qmldir:"source.qmldir",qss:"source.qss",r:"source.r",racket:"source.racket",raku:"source.perl.6",perl6:"source.perl.6",razor:"text.aspnetcorerazor",reg:"source.reg",regexp:"source.regexp.python",regex:"source.regexp.python",rel:"source.rel",riscv:"source.riscv",rst:"source.rst",ruby:"source.ruby",rb:"source.ruby",rust:"source.rust",rs:"source.rust",sas:"source.sas",sass:"source.sass",scala:"source.scala",scheme:"source.scheme",scss:"source.css.scss",shaderlab:"source.shaderlab",shader:"source.shaderlab",shellscript:"source.shell",bash:"source.shell",sh:"source.shell",shell:"source.shell",zsh:"source.shell",shellsession:"text.shell-session",console:"text.shell-session",smalltalk:"source.smalltalk",solidity:"source.solidity",soy:"text.html.soy","closure-templates":"text.html.soy",sparql:"source.sparql",splunk:"source.splunk_search",spl:"source.splunk_search",sql:"source.sql","ssh-config":"source.ssh-config",stata:"source.stata",stylus:"source.stylus",styl:"source.stylus",svelte:"source.svelte",swift:"source.swift","system-verilog":"source.systemverilog",systemd:"source.systemd",tasl:"source.tasl",tcl:"source.tcl",templ:"source.templ",terraform:"source.hcl.terraform",tf:"source.hcl.terraform",tfvars:"source.hcl.terraform",tex:"text.tex",toml:"source.toml","ts-tags":"source.ts.tags",lit:"source.ts.tags",tsv:"text.tsv",tsx:"source.tsx",turtle:"source.turtle",twig:"text.html.twig",txt:"source.txt",typescript:"source.ts",ts:"source.ts",typespec:"source.tsp",tsp:"source.tsp",typst:"source.typst",typ:"source.typst",v:"source.v",vala:"source.vala",vb:"source.asp.vb.net",cmd:"source.asp.vb.net",verilog:"source.verilog",vhdl:"source.vhdl",viml:"source.viml",vim:"source.viml",vimscript:"source.viml",vue:"source.vue","vue-html":"text.html.vue-html",vyper:"source.vyper",vy:"source.vyper",wasm:"source.wat",wenyan:"source.wenyan","文言":"source.wenyan",wgsl:"source.wgsl",wikitext:"source.wikitext",mediawiki:"source.wikitext",wiki:"source.wikitext",wolfram:"source.wolfram",wl:"source.wolfram",xml:"text.xml",xsl:"text.xml.xsl",yaml:"source.yaml",yml:"source.yaml",zenscript:"source.zenscript",zig:"source.zig"},x={"source.abap":{id:"abap",embeddedScopes:[]},"source.actionscript.3":{id:"actionscript-3",embeddedScopes:[]},"source.ada":{id:"ada",embeddedScopes:[]},"text.html.derivative.ng":{id:"angular-html",embeddedScopes:["text.html.basic"]},"source.ts.ng":{id:"angular-ts",embeddedScopes:[]},"source.apacheconf":{id:"apache",embeddedScopes:[]},"source.apex":{id:"apex",embeddedScopes:[]},"source.apl":{id:"apl",embeddedScopes:["text.html.basic","text.xml","source.css","source.js","source.json"]},"source.applescript":{id:"applescript",embeddedScopes:[]},"source.ara":{id:"ara",embeddedScopes:[]},"text.asciidoc":{id:"asciidoc",embeddedScopes:["text.html.basic","source.yaml","text.csv","source.c","source.clojure","source.coffee","source.cpp","source.css","source.cs","source.diff","source.dockerfile","source.elixir","source.elm","source.erlang","source.go","source.groovy","source.haskell","source.java","source.js","source.json","source.js.jsx","source.julia","source.kotlin","source.css.less","source.makefile","source.objc","source.ocaml","source.perl","source.python","source.r","source.ruby","source.rust","source.sass","source.scala","source.css.scss","source.shell","source.sql","source.swift","source.toml","source.ts","text.xml"]},"source.asm.x86_64":{id:"asm",embeddedScopes:[]},"source.astro":{id:"astro",embeddedScopes:["source.json","source.js","source.ts","source.stylus","source.sass","source.css","source.css.scss","source.css.less","source.css.postcss","source.tsx"]},"source.awk":{id:"awk",embeddedScopes:[]},"source.ballerina":{id:"ballerina",embeddedScopes:[]},"source.batchfile":{id:"bat",embeddedScopes:[]},"text.beancount":{id:"beancount",embeddedScopes:[]},"source.berry":{id:"berry",embeddedScopes:[]},"text.bibtex":{id:"bibtex",embeddedScopes:[]},"source.bicep":{id:"bicep",embeddedScopes:[]},"text.html.php.blade":{id:"blade",embeddedScopes:["text.html.basic","text.xml","source.sql","source.js","source.json","source.css"]},"source.c":{id:"c",embeddedScopes:[]},"source.cadence":{id:"cadence",embeddedScopes:[]},"source.clar":{id:"clarity",embeddedScopes:[]},"source.clojure":{id:"clojure",embeddedScopes:[]},"source.cmake":{id:"cmake",embeddedScopes:[]},"source.cobol":{id:"cobol",embeddedScopes:["source.sql","text.html.basic","source.java"]},"text.codeowners":{id:"codeowners",embeddedScopes:[]},"source.ql":{id:"codeql",embeddedScopes:[]},"source.coffee":{id:"coffee",embeddedScopes:["source.js"]},"source.commonlisp":{id:"common-lisp",embeddedScopes:[]},"source.cpp":{id:"cpp",embeddedScopes:["source.regexp.python","source.glsl","source.sql"]},"source.crystal":{id:"crystal",embeddedScopes:["text.html.basic","source.sql","source.css","source.c","source.js","source.shell"]},"source.cs":{id:"csharp",embeddedScopes:[]},"source.css":{id:"css",embeddedScopes:[]},"text.csv":{id:"csv",embeddedScopes:[]},"source.cue":{id:"cue",embeddedScopes:[]},"source.cypher":{id:"cypher",embeddedScopes:[]},"source.d":{id:"d",embeddedScopes:[]},"source.dart":{id:"dart",embeddedScopes:[]},"source.dax":{id:"dax",embeddedScopes:[]},"source.desktop":{id:"desktop",embeddedScopes:[]},"source.diff":{id:"diff",embeddedScopes:[]},"source.dockerfile":{id:"docker",embeddedScopes:[]},"source.dotenv":{id:"dotenv",embeddedScopes:[]},"source.dm":{id:"dream-maker",embeddedScopes:[]},"text.html.edge":{id:"edge",embeddedScopes:["source.ts","text.html.basic","text.html.derivative"]},"source.elixir":{id:"elixir",embeddedScopes:["text.html.basic"]},"source.elm":{id:"elm",embeddedScopes:["source.glsl"]},"source.emacs.lisp":{id:"emacs-lisp",embeddedScopes:[]},"text.html.erb":{id:"erb",embeddedScopes:["text.html.basic","source.ruby"]},"source.erlang":{id:"erlang",embeddedScopes:[]},"source.fnl":{id:"fennel",embeddedScopes:[]},"source.fish":{id:"fish",embeddedScopes:[]},"source.ftl":{id:"fluent",embeddedScopes:[]},"source.fortran.fixed":{id:"fortran-fixed-form",embeddedScopes:["source.fortran.free"]},"source.fortran.free":{id:"fortran-free-form",embeddedScopes:[]},"source.fsharp":{id:"fsharp",embeddedScopes:["text.html.markdown"]},"source.gdresource":{id:"gdresource",embeddedScopes:["source.gdshader","source.gdscript"]},"source.gdscript":{id:"gdscript",embeddedScopes:[]},"source.gdshader":{id:"gdshader",embeddedScopes:[]},"source.genie":{id:"genie",embeddedScopes:[]},"text.gherkin.feature":{id:"gherkin",embeddedScopes:[]},"text.git-commit":{id:"git-commit",embeddedScopes:["source.diff"]},"text.git-rebase":{id:"git-rebase",embeddedScopes:["source.shell"]},"source.gleam":{id:"gleam",embeddedScopes:[]},"source.gjs":{id:"glimmer-js",embeddedScopes:["source.js","source.ts","source.css","text.html.basic"]},"source.gts":{id:"glimmer-ts",embeddedScopes:["source.ts","source.css","source.js","text.html.basic"]},"source.glsl":{id:"glsl",embeddedScopes:["source.c"]},"source.gnuplot":{id:"gnuplot",embeddedScopes:[]},"source.go":{id:"go",embeddedScopes:[]},"source.graphql":{id:"graphql",embeddedScopes:["source.js","source.ts","source.js.jsx","source.tsx"]},"source.groovy":{id:"groovy",embeddedScopes:[]},"source.hack":{id:"hack",embeddedScopes:["text.html.basic","source.sql"]},"text.haml":{id:"haml",embeddedScopes:["source.ruby","source.js","source.sass","source.coffee","text.html.markdown","source.css"]},"text.html.handlebars":{id:"handlebars",embeddedScopes:["text.html.basic","source.css","source.js","source.yaml"]},"source.haskell":{id:"haskell",embeddedScopes:[]},"source.hx":{id:"haxe",embeddedScopes:[]},"source.hcl":{id:"hcl",embeddedScopes:[]},"source.hjson":{id:"hjson",embeddedScopes:[]},"source.hlsl":{id:"hlsl",embeddedScopes:[]},"text.html.basic":{id:"html",embeddedScopes:["source.js","source.css"]},"text.html.derivative":{id:"html-derivative",embeddedScopes:["text.html.basic"]},"source.http":{id:"http",embeddedScopes:["source.shell","source.json","text.xml","source.graphql"]},"source.hxml":{id:"hxml",embeddedScopes:["source.hx"]},"source.hy":{id:"hy",embeddedScopes:[]},"source.imba":{id:"imba",embeddedScopes:["source.ts"]},"source.ini":{id:"ini",embeddedScopes:[]},"source.java":{id:"java",embeddedScopes:[]},"source.js":{id:"javascript",embeddedScopes:[]},"source.jinja":{id:"jinja",embeddedScopes:[]},"source.jison":{id:"jison",embeddedScopes:["source.js"]},"source.json":{id:"json",embeddedScopes:[]},"source.json5":{id:"json5",embeddedScopes:[]},"source.json.comments":{id:"jsonc",embeddedScopes:[]},"source.json.lines":{id:"jsonl",embeddedScopes:[]},"source.jsonnet":{id:"jsonnet",embeddedScopes:[]},"source.jssm":{id:"jssm",embeddedScopes:[]},"source.js.jsx":{id:"jsx",embeddedScopes:[]},"source.julia":{id:"julia",embeddedScopes:["source.cpp","source.python","source.js","source.r","source.sql"]},"source.kotlin":{id:"kotlin",embeddedScopes:[]},"source.kusto":{id:"kusto",embeddedScopes:[]},"text.tex.latex":{id:"latex",embeddedScopes:["text.tex","source.shell","source.css","source.gnuplot","source.haskell","text.html.basic","source.java","source.julia","source.js","source.lua","source.python","source.ruby","source.rust","source.ts","text.xml","source.yaml","source.scala"]},"source.lean4":{id:"lean",embeddedScopes:[]},"source.css.less":{id:"less",embeddedScopes:[]},"text.html.liquid":{id:"liquid",embeddedScopes:["text.html.basic","source.css","source.json","source.js"]},"text.log":{id:"log",embeddedScopes:[]},"source.logo":{id:"logo",embeddedScopes:[]},"source.lua":{id:"lua",embeddedScopes:["source.c"]},"source.luau":{id:"luau",embeddedScopes:[]},"source.makefile":{id:"make",embeddedScopes:[]},"text.html.markdown":{id:"markdown",embeddedScopes:["source.css","text.html.basic","source.ini","source.java","source.lua","source.makefile","source.perl","source.r","source.ruby","source.php","source.sql","source.asp.vb.net","text.xml","text.xml.xsl","source.yaml","source.batchfile","source.clojure","source.coffee","source.c","source.cpp","source.diff","source.dockerfile","text.git-commit","text.git-rebase","source.go","source.groovy","text.pug","source.js","source.json","source.json.comments","source.css.less","source.objc","source.swift","source.css.scss","source.perl.6","source.powershell","source.python","source.julia","source.regexp.python","source.rust","source.scala","source.shell","source.ts","source.tsx","source.cs","source.fsharp","source.dart","text.html.handlebars","text.log","source.erlang","source.elixir","text.tex.latex","text.bibtex","text.html.derivative"]},"text.marko":{id:"marko",embeddedScopes:["source.css","source.css.less","source.css.scss","source.js"]},"source.matlab":{id:"matlab",embeddedScopes:[]},"text.markdown.mdc":{id:"mdc",embeddedScopes:["text.html.markdown","source.yaml","text.html.derivative"]},"source.mdx":{id:"mdx",embeddedScopes:["source.tsx","source.toml","source.yaml","source.c","source.clojure","source.coffee","source.cpp","source.cs","source.css","source.diff","source.dockerfile","source.elixir","source.elm","source.erlang","source.go","source.graphql","source.haskell","text.html.basic","source.ini","source.java","source.js","source.json","source.julia","source.kotlin","source.css.less","source.lua","source.makefile","text.html.markdown","source.objc","source.perl","source.python","source.r","source.ruby","source.rust","source.scala","source.css.scss","source.shell","text.shell-session","source.sql","text.xml","source.swift","source.ts"]},"markdown.mermaid.codeblock":{id:"mermaid",embeddedScopes:[]},"source.mojo":{id:"mojo",embeddedScopes:[]},"source.move":{id:"move",embeddedScopes:[]},"source.narrat":{id:"narrat",embeddedScopes:[]},"source.nextflow":{id:"nextflow",embeddedScopes:[]},"source.nginx":{id:"nginx",embeddedScopes:["source.lua"]},"source.nim":{id:"nim",embeddedScopes:["source.c","text.html.basic","text.xml","source.js","source.css","source.glsl","text.html.markdown"]},"source.nix":{id:"nix",embeddedScopes:[]},"source.nushell":{id:"nushell",embeddedScopes:[]},"source.objc":{id:"objective-c",embeddedScopes:[]},"source.objcpp":{id:"objective-cpp",embeddedScopes:[]},"source.ocaml":{id:"ocaml",embeddedScopes:[]},"source.pascal":{id:"pascal",embeddedScopes:[]},"source.perl":{id:"perl",embeddedScopes:["text.html.basic","text.xml","source.css","source.js","source.sql"]},"source.php":{id:"php",embeddedScopes:["text.html.basic","text.xml","source.sql","source.js","source.json","source.css"]},"source.plsql.oracle":{id:"plsql",embeddedScopes:[]},"source.po":{id:"po",embeddedScopes:[]},"source.css.postcss":{id:"postcss",embeddedScopes:[]},"source.powerquery":{id:"powerquery",embeddedScopes:[]},"source.powershell":{id:"powershell",embeddedScopes:[]},"source.prisma":{id:"prisma",embeddedScopes:[]},"source.prolog":{id:"prolog",embeddedScopes:[]},"source.proto":{id:"proto",embeddedScopes:[]},"text.pug":{id:"pug",embeddedScopes:["source.js","source.css","source.sass","source.css.scss","source.stylus","source.coffee","text.html.basic"]},"source.puppet":{id:"puppet",embeddedScopes:[]},"source.purescript":{id:"purescript",embeddedScopes:[]},"source.python":{id:"python",embeddedScopes:[]},"source.qml":{id:"qml",embeddedScopes:["source.js"]},"source.qmldir":{id:"qmldir",embeddedScopes:[]},"source.qss":{id:"qss",embeddedScopes:[]},"source.r":{id:"r",embeddedScopes:[]},"source.racket":{id:"racket",embeddedScopes:[]},"source.perl.6":{id:"raku",embeddedScopes:[]},"text.aspnetcorerazor":{id:"razor",embeddedScopes:["text.html.basic","source.cs"]},"source.reg":{id:"reg",embeddedScopes:[]},"source.regexp.python":{id:"regexp",embeddedScopes:[]},"source.rel":{id:"rel",embeddedScopes:[]},"source.riscv":{id:"riscv",embeddedScopes:[]},"source.rst":{id:"rst",embeddedScopes:["text.html.derivative","source.cpp","source.python","source.js","source.shell","source.yaml","source.cmake","source.ruby"]},"source.ruby":{id:"ruby",embeddedScopes:["text.html.basic","text.xml","source.sql","source.css","source.c","source.js","source.shell","source.lua"]},"source.rust":{id:"rust",embeddedScopes:[]},"source.sas":{id:"sas",embeddedScopes:["source.sql"]},"source.sass":{id:"sass",embeddedScopes:[]},"source.scala":{id:"scala",embeddedScopes:[]},"source.scheme":{id:"scheme",embeddedScopes:[]},"source.css.scss":{id:"scss",embeddedScopes:["source.css"]},"source.shaderlab":{id:"shaderlab",embeddedScopes:["source.hlsl"]},"source.shell":{id:"shellscript",embeddedScopes:[]},"text.shell-session":{id:"shellsession",embeddedScopes:["source.shell"]},"source.smalltalk":{id:"smalltalk",embeddedScopes:[]},"source.solidity":{id:"solidity",embeddedScopes:[]},"text.html.soy":{id:"soy",embeddedScopes:["text.html.basic"]},"source.sparql":{id:"sparql",embeddedScopes:["source.turtle"]},"source.splunk_search":{id:"splunk",embeddedScopes:[]},"source.sql":{id:"sql",embeddedScopes:[]},"source.ssh-config":{id:"ssh-config",embeddedScopes:[]},"source.stata":{id:"stata",embeddedScopes:["source.sql"]},"source.stylus":{id:"stylus",embeddedScopes:[]},"source.svelte":{id:"svelte",embeddedScopes:["source.js","source.ts","source.coffee","source.stylus","source.sass","source.css","source.css.scss","source.css.less","source.css.postcss","text.pug","text.html.markdown"]},"source.swift":{id:"swift",embeddedScopes:[]},"source.systemverilog":{id:"system-verilog",embeddedScopes:[]},"source.systemd":{id:"systemd",embeddedScopes:[]},"source.tasl":{id:"tasl",embeddedScopes:[]},"source.tcl":{id:"tcl",embeddedScopes:[]},"source.templ":{id:"templ",embeddedScopes:["source.go","source.js","source.css"]},"source.hcl.terraform":{id:"terraform",embeddedScopes:[]},"text.tex":{id:"tex",embeddedScopes:["source.r"]},"source.toml":{id:"toml",embeddedScopes:[]},"source.ts.tags":{id:"ts-tags",embeddedScopes:["source.ts"]},"text.tsv":{id:"tsv",embeddedScopes:[]},"source.tsx":{id:"tsx",embeddedScopes:[]},"source.turtle":{id:"turtle",embeddedScopes:[]},"text.html.twig":{id:"twig",embeddedScopes:["source.css","source.js","source.css.scss","source.php","source.python","source.ruby"]},"source.txt":{id:"txt",embeddedScopes:[]},"source.ts":{id:"typescript",embeddedScopes:[]},"source.tsp":{id:"typespec",embeddedScopes:[]},"source.typst":{id:"typst",embeddedScopes:[]},"source.v":{id:"v",embeddedScopes:[]},"source.vala":{id:"vala",embeddedScopes:[]},"source.asp.vb.net":{id:"vb",embeddedScopes:[]},"source.verilog":{id:"verilog",embeddedScopes:[]},"source.vhdl":{id:"vhdl",embeddedScopes:[]},"source.viml":{id:"viml",embeddedScopes:[]},"source.vue":{id:"vue",embeddedScopes:["text.html.basic","text.html.markdown","text.pug","source.stylus","source.sass","source.css","source.css.scss","source.css.less","source.js","source.ts","source.js.jsx","source.tsx","source.coffee","source.json","source.json.comments","source.json5","source.yaml","source.toml","source.graphql","text.html.derivative"]},"text.html.vue-html":{id:"vue-html",embeddedScopes:["source.vue","source.js"]},"source.vyper":{id:"vyper",embeddedScopes:[]},"source.wat":{id:"wasm",embeddedScopes:[]},"source.wenyan":{id:"wenyan",embeddedScopes:[]},"source.wgsl":{id:"wgsl",embeddedScopes:[]},"source.wikitext":{id:"wikitext",embeddedScopes:["text.html.basic","source.css","source.ini","source.java","source.lua","source.makefile","source.perl","source.r","source.ruby","source.php","source.sql","source.asp.vb.net","text.xml","text.xml.xsl","source.yaml","source.batchfile","source.clojure","source.coffee","source.c","source.cpp","source.diff","source.dockerfile","source.go","source.groovy","text.pug","source.js","source.json.comments","source.css.less","source.objc","source.swift","source.css.scss","source.perl.6","source.powershell","source.python","source.julia","source.rust","source.scala","source.shell","source.ts","source.cs","source.fsharp","source.dart","text.html.handlebars","text.html.markdown","source.erlang","source.elixir","text.tex.latex","text.bibtex","source.json"]},"source.wolfram":{id:"wolfram",embeddedScopes:[]},"text.xml":{id:"xml",embeddedScopes:["source.java"]},"text.xml.xsl":{id:"xsl",embeddedScopes:["text.xml"]},"source.yaml":{id:"yaml",embeddedScopes:[]},"source.zenscript":{id:"zenscript",embeddedScopes:[]},"source.zig":{id:"zig",embeddedScopes:[]}};var w={d:(e,t)=>{for(var s in t)w.o(t,s)&&!w.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},v={};w.d(v,{_X:()=>Ke,Bz:()=>Qe,ot:()=>He,u:()=>ze,jG:()=>P,Pn:()=>Ve});const C="undefined"!=typeof process&&!!process.env.VSCODE_TEXTMATE_DEBUG;var j;function A(e,t){const s=[],r=function(e){let t=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,s=t.exec(e);return{next:()=>{if(!s)return null;const r=s[0];return s=t.exec(e),r}}}(e);let o=r.next();for(;null!==o;){let e=0;if(2===o.length&&":"===o.charAt(1)){switch(o.charAt(0)){case"R":e=1;break;case"L":e=-1;break;default:console.log(`Unknown priority ${o} in scope selector`)}o=r.next()}let t=c();if(s.push({matcher:t,priority:e}),","!==o)break;o=r.next()}return s;function n(){if("-"===o){o=r.next();const e=n();return t=>!!e&&!e(t)}if("("===o){o=r.next();const e=function(){const e=[];let t=c();for(;t&&(e.push(t),"|"===o||","===o);){do{o=r.next()}while("|"===o||","===o);t=c()}return t=>e.some((e=>e(t)))}();return")"===o&&(o=r.next()),e}if(N(o)){const e=[];do{e.push(o),o=r.next()}while(N(o));return s=>t(e,s)}return null}function c(){const e=[];let t=n();for(;t;)e.push(t),t=n();return t=>e.every((e=>e(t)))}}function N(e){return!!e&&!!e.match(/[\w\.:]+/)}function P(e){"function"==typeof e.dispose&&e.dispose()}function R(e){return Array.isArray(e)?function(e){let t=[];for(let s=0,r=e.length;s<r;s++)t[s]=R(e[s]);return t}(e):"object"==typeof e?function(e){let t={};for(let s in e)t[s]=R(e[s]);return t}(e):e}function E(e,...t){return t.forEach((t=>{for(let s in t)e[s]=t[s]})),e}function I(e){const t=~e.lastIndexOf("/")||~e.lastIndexOf("\\");return 0===t?e:~t==e.length-1?I(e.substring(0,e.length-1)):e.substr(1+~t)}!function(e){e.toBinaryStr=function(e){let t=e.toString(2);for(;t.length<32;)t="0"+t;return t},e.print=function(t){const s=e.getLanguageId(t),r=e.getTokenType(t),o=e.getFontStyle(t),n=e.getForeground(t),c=e.getBackground(t);console.log({languageId:s,tokenType:r,fontStyle:o,foreground:n,background:c})},e.getLanguageId=function(e){return(255&e)>>>0},e.getTokenType=function(e){return(768&e)>>>8},e.containsBalancedBrackets=function(e){return 0!=(1024&e)},e.getFontStyle=function(e){return(30720&e)>>>11},e.getForeground=function(e){return(16744448&e)>>>15},e.getBackground=function(e){return(4278190080&e)>>>24},e.set=function(t,s,r,o,n,c,i){let a=e.getLanguageId(t),u=e.getTokenType(t),l=e.containsBalancedBrackets(t)?1:0,d=e.getFontStyle(t),h=e.getForeground(t),p=e.getBackground(t);return 0!==s&&(a=s),8!==r&&(u=r),null!==o&&(l=o?1:0),-1!==n&&(d=n),0!==c&&(h=c),0!==i&&(p=i),(a<<0|u<<8|l<<10|d<<11|h<<15|p<<24)>>>0}}(j||(j={}));let L=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g;class B{static hasCaptures(e){return null!==e&&(L.lastIndex=0,L.test(e))}static replaceCaptures(e,t,s){return e.replace(L,((e,r,o,n)=>{let c=s[parseInt(r||o,10)];if(!c)return e;{let e=t.substring(c.start,c.end);for(;"."===e[0];)e=e.substring(1);switch(n){case"downcase":return e.toLowerCase();case"upcase":return e.toUpperCase();default:return e}}}))}}function O(e,t){return e<t?-1:e>t?1:0}function G(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;let s=e.length,r=t.length;if(s===r){for(let r=0;r<s;r++){let s=O(e[r],t[r]);if(0!==s)return s}return 0}return s-r}function T(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function q(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}class F{constructor(e){this.fn=e,this.cache=new Map}get(e){if(this.cache.has(e))return this.cache.get(e);const t=this.fn(e);return this.cache.set(e,t),t}}const $="undefined"==typeof performance?function(){return Date.now()}:function(){return performance.now()};class M{constructor(e){this.scopeName=e}toKey(){return this.scopeName}}class W{constructor(e,t){this.scopeName=e,this.ruleName=t}toKey(){return`${this.scopeName}#${this.ruleName}`}}class U{constructor(){this._references=[],this._seenReferenceKeys=new Set,this.visitedRule=new Set}get references(){return this._references}add(e){const t=e.toKey();this._seenReferenceKeys.has(t)||(this._seenReferenceKeys.add(t),this._references.push(e))}}class D{constructor(e,t){this.repo=e,this.initialScopeName=t,this.seenFullScopeRequests=new Set,this.seenPartialScopeRequests=new Set,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new M(this.initialScopeName)]}processQueue(){const e=this.Q;this.Q=[];const t=new U;for(const s of e)z(s,this.initialScopeName,this.repo,t);for(const e of t.references)if(e instanceof M){if(this.seenFullScopeRequests.has(e.scopeName))continue;this.seenFullScopeRequests.add(e.scopeName),this.Q.push(e)}else{if(this.seenFullScopeRequests.has(e.scopeName))continue;if(this.seenPartialScopeRequests.has(e.toKey()))continue;this.seenPartialScopeRequests.add(e.toKey()),this.Q.push(e)}}}function z(e,t,s,r){const o=s.lookup(e.scopeName);if(!o){if(e.scopeName===t)throw new Error(`No grammar provided for <${t}>`);return}const n=s.lookup(t);e instanceof M?Q({baseGrammar:n,selfGrammar:o},r):H(e.ruleName,{baseGrammar:n,selfGrammar:o,repository:o.repository},r);const c=s.injections(e.scopeName);if(c)for(const e of c)r.add(new M(e))}function H(e,t,s){t.repository&&t.repository[e]&&K([t.repository[e]],t,s)}function Q(e,t){e.selfGrammar.patterns&&Array.isArray(e.selfGrammar.patterns)&&K(e.selfGrammar.patterns,{...e,repository:e.selfGrammar.repository},t),e.selfGrammar.injections&&K(Object.values(e.selfGrammar.injections),{...e,repository:e.selfGrammar.repository},t)}function K(e,t,s){for(const r of e){if(s.visitedRule.has(r))continue;s.visitedRule.add(r);const e=r.repository?E({},t.repository,r.repository):t.repository;Array.isArray(r.patterns)&&K(r.patterns,{...t,repository:e},s);const o=r.include;if(!o)continue;const n=ee(o);switch(n.kind){case 0:Q({...t,selfGrammar:t.baseGrammar},s);break;case 1:Q(t,s);break;case 2:H(n.ruleName,{...t,repository:e},s);break;case 3:case 4:const r=n.scopeName===t.selfGrammar.scopeName?t.selfGrammar:n.scopeName===t.baseGrammar.scopeName?t.baseGrammar:void 0;if(r){const o={baseGrammar:t.baseGrammar,selfGrammar:r,repository:e};4===n.kind?H(n.ruleName,o,s):Q(o,s)}else 4===n.kind?s.add(new W(n.scopeName,n.ruleName)):s.add(new M(n.scopeName))}}}class V{constructor(){this.kind=0}}class Y{constructor(){this.kind=1}}class X{constructor(e){this.ruleName=e,this.kind=2}}class J{constructor(e){this.scopeName=e,this.kind=3}}class Z{constructor(e,t){this.scopeName=e,this.ruleName=t,this.kind=4}}function ee(e){if("$base"===e)return new V;if("$self"===e)return new Y;const t=e.indexOf("#");if(-1===t)return new J(e);if(0===t)return new X(e.substring(1));{const s=e.substring(0,t),r=e.substring(t+1);return new Z(s,r)}}const te=/\\(\d+)/,se=/\\(\d+)/g;class re{constructor(e,t,s,r){this.$location=e,this.id=t,this._name=s||null,this._nameIsCapturing=B.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=B.hasCaptures(this._contentName)}get debugName(){const e=this.$location?`${I(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${e}`}getName(e,t){return this._nameIsCapturing&&null!==this._name&&null!==e&&null!==t?B.replaceCaptures(this._name,e,t):this._name}getContentName(e,t){return this._contentNameIsCapturing&&null!==this._contentName?B.replaceCaptures(this._contentName,e,t):this._contentName}}class oe extends re{constructor(e,t,s,r,o){super(e,t,s,r),this.retokenizeCapturedWithRuleId=o}dispose(){}collectPatterns(e,t){throw new Error("Not supported!")}compile(e,t){throw new Error("Not supported!")}compileAG(e,t,s,r){throw new Error("Not supported!")}}class ne extends re{constructor(e,t,s,r,o){super(e,t,s,null),this._match=new le(r,this.id),this.captures=o,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,t){t.push(this._match)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e).compileAG(e,s,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new de,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class ce extends re{constructor(e,t,s,r,o){super(e,t,s,r),this.patterns=o.patterns,this.hasMissingPatterns=o.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,t){for(const s of this.patterns)e.getRule(s).collectPatterns(e,t)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e).compileAG(e,s,r)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new de,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}}class ie extends re{constructor(e,t,s,r,o,n,c,i,a,u){super(e,t,s,r),this._begin=new le(o,this.id),this.beginCaptures=n,this._end=new le(c||"￿",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=i,this.applyEndPatternLast=a||!1,this.patterns=u.patterns,this.hasMissingPatterns=u.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,t){return this._end.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e,t).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e,t).compileAG(e,s,r)}_getCachedCompiledPatterns(e,t){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new de;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,t):this._cachedCompiledPatterns.setSource(0,t)),this._cachedCompiledPatterns}}class ae extends re{constructor(e,t,s,r,o,n,c,i,a){super(e,t,s,r),this._begin=new le(o,this.id),this.beginCaptures=n,this.whileCaptures=i,this._while=new le(c,-2),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=a.patterns,this.hasMissingPatterns=a.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,t){return this._while.resolveBackReferences(e,t)}collectPatterns(e,t){t.push(this._begin)}compile(e,t){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,t,s,r){return this._getCachedCompiledPatterns(e).compileAG(e,s,r)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new de;for(const t of this.patterns)e.getRule(t).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,t){return this._getCachedCompiledWhilePatterns(e,t).compile(e)}compileWhileAG(e,t,s,r){return this._getCachedCompiledWhilePatterns(e,t).compileAG(e,s,r)}_getCachedCompiledWhilePatterns(e,t){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new de,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t||"￿"),this._cachedCompiledWhilePatterns}}class ue{static createCaptureRule(e,t,s,r,o){return e.registerRule((e=>new oe(t,e,s,r,o)))}static getCompiledRuleId(e,t,s){return e.id||t.registerRule((r=>{if(e.id=r,e.match)return new ne(e.$vscodeTextmateLocation,e.id,e.name,e.match,ue._compileCaptures(e.captures,t,s));if(void 0===e.begin){e.repository&&(s=E({},s,e.repository));let r=e.patterns;return void 0===r&&e.include&&(r=[{include:e.include}]),new ce(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,ue._compilePatterns(r,t,s))}return e.while?new ae(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ue._compileCaptures(e.beginCaptures||e.captures,t,s),e.while,ue._compileCaptures(e.whileCaptures||e.captures,t,s),ue._compilePatterns(e.patterns,t,s)):new ie(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,ue._compileCaptures(e.beginCaptures||e.captures,t,s),e.end,ue._compileCaptures(e.endCaptures||e.captures,t,s),e.applyEndPatternLast,ue._compilePatterns(e.patterns,t,s))})),e.id}static _compileCaptures(e,t,s){let r=[];if(e){let o=0;for(const t in e){if("$vscodeTextmateLocation"===t)continue;const e=parseInt(t,10);e>o&&(o=e)}for(let e=0;e<=o;e++)r[e]=null;for(const o in e){if("$vscodeTextmateLocation"===o)continue;const n=parseInt(o,10);let c=0;e[o].patterns&&(c=ue.getCompiledRuleId(e[o],t,s)),r[n]=ue.createCaptureRule(t,e[o].$vscodeTextmateLocation,e[o].name,e[o].contentName,c)}}return r}static _compilePatterns(e,t,s){let r=[];if(e)for(let o=0,n=e.length;o<n;o++){const n=e[o];let c=-1;if(n.include){const e=ee(n.include);switch(e.kind){case 0:case 1:c=ue.getCompiledRuleId(s[n.include],t,s);break;case 2:let r=s[e.ruleName];r&&(c=ue.getCompiledRuleId(r,t,s));break;case 3:case 4:const o=e.scopeName,i=4===e.kind?e.ruleName:null,a=t.getExternalGrammar(o,s);if(a)if(i){let e=a.repository[i];e&&(c=ue.getCompiledRuleId(e,t,a.repository))}else c=ue.getCompiledRuleId(a.repository.$self,t,a.repository)}}else c=ue.getCompiledRuleId(n,t,s);if(-1!==c){const e=t.getRule(c);let s=!1;if((e instanceof ce||e instanceof ie||e instanceof ae)&&e.hasMissingPatterns&&0===e.patterns.length&&(s=!0),s)continue;r.push(c)}}return{patterns:r,hasMissingPatterns:(e?e.length:0)!==r.length}}}class le{constructor(e,t){if(e){const t=e.length;let s=0,r=[],o=!1;for(let n=0;n<t;n++)if("\\"===e.charAt(n)&&n+1<t){const t=e.charAt(n+1);"z"===t?(r.push(e.substring(s,n)),r.push("$(?!\\n)(?<!\\n)"),s=n+2):"A"!==t&&"G"!==t||(o=!0),n++}this.hasAnchor=o,0===s?this.source=e:(r.push(e.substring(s,t)),this.source=r.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=t,this.hasBackReferences=te.test(this.source)}clone(){return new le(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,t){let s=t.map((t=>e.substring(t.start,t.end)));return se.lastIndex=0,this.source.replace(se,((e,t)=>q(s[parseInt(t,10)]||"")))}_buildAnchorCache(){let e,t,s,r,o=[],n=[],c=[],i=[];for(e=0,t=this.source.length;e<t;e++)s=this.source.charAt(e),o[e]=s,n[e]=s,c[e]=s,i[e]=s,"\\"===s&&e+1<t&&(r=this.source.charAt(e+1),"A"===r?(o[e+1]="￿",n[e+1]="￿",c[e+1]="A",i[e+1]="A"):"G"===r?(o[e+1]="￿",n[e+1]="G",c[e+1]="￿",i[e+1]="G"):(o[e+1]=r,n[e+1]=r,c[e+1]=r,i[e+1]=r),e++);return{A0_G0:o.join(""),A0_G1:n.join(""),A1_G0:c.join(""),A1_G1:i.join("")}}resolveAnchors(e,t){return this.hasAnchor&&this._anchorCache?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source}}class de{constructor(){this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}unshift(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor}length(){return this._items.length}setSource(e,t){this._items[e].source!==t&&(this._disposeCaches(),this._items[e].setSource(t))}compile(e){if(!this._cached){let t=this._items.map((e=>e.source));this._cached=new he(e,t,this._items.map((e=>e.ruleId)))}return this._cached}compileAG(e,t,s){return this._hasAnchors?t?s?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(e,t,s)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(e,t,s)),this._anchorCache.A1_G0):s?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(e,t,s)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(e,t,s)),this._anchorCache.A0_G0):this.compile(e)}_resolveAnchors(e,t,s){let r=this._items.map((e=>e.resolveAnchors(t,s)));return new he(e,r,this._items.map((e=>e.ruleId)))}}class he{constructor(e,t,s){this.regExps=t,this.rules=s,this.scanner=e.createOnigScanner(t)}dispose(){"function"==typeof this.scanner.dispose&&this.scanner.dispose()}toString(){const e=[];for(let t=0,s=this.rules.length;t<s;t++)e.push("   - "+this.rules[t]+": "+this.regExps[t]);return e.join("\n")}findNextMatchSync(e,t,s){const r=this.scanner.findNextMatchSync(e,t,s);return r?{ruleId:this.rules[r.index],captureIndices:r.captureIndices}:null}}class pe{constructor(e,t,s){this._colorMap=e,this._defaults=t,this._root=s,this._cachedMatchRoot=new F((e=>this._root.match(e)))}static createFromRawTheme(e,t){return this.createFromParsedTheme(function(e){if(!e)return[];if(!e.settings||!Array.isArray(e.settings))return[];let t=e.settings,s=[],r=0;for(let e=0,o=t.length;e<o;e++){let o,n=t[e];if(!n.settings)continue;if("string"==typeof n.scope){let e=n.scope;e=e.replace(/^[,]+/,""),e=e.replace(/[,]+$/,""),o=e.split(",")}else o=Array.isArray(n.scope)?n.scope:[""];let c=-1;if("string"==typeof n.settings.fontStyle){c=0;let e=n.settings.fontStyle.split(" ");for(let t=0,s=e.length;t<s;t++)switch(e[t]){case"italic":c|=1;break;case"bold":c|=2;break;case"underline":c|=4;break;case"strikethrough":c|=8}}let i=null;"string"==typeof n.settings.foreground&&T(n.settings.foreground)&&(i=n.settings.foreground);let a=null;"string"==typeof n.settings.background&&T(n.settings.background)&&(a=n.settings.background);for(let t=0,n=o.length;t<n;t++){let n=o[t].trim().split(" "),u=n[n.length-1],l=null;n.length>1&&(l=n.slice(0,n.length-1),l.reverse()),s[r++]=new be(u,l,e,c,i,a)}}return s}(e),t)}static createFromParsedTheme(e,t){return function(e,t){e.sort(((e,t)=>{let s=O(e.scope,t.scope);return 0!==s?s:(s=G(e.parentScopes,t.parentScopes),0!==s?s:e.index-t.index)}));let s=0,r="#000000",o="#ffffff";for(;e.length>=1&&""===e[0].scope;){let t=e.shift();-1!==t.fontStyle&&(s=t.fontStyle),null!==t.foreground&&(r=t.foreground),null!==t.background&&(o=t.background)}let n=new ye(t),c=new ge(s,n.getId(r),n.getId(o)),i=new ke(new _e(0,null,-1,0,0),[]);for(let t=0,s=e.length;t<s;t++){let s=e[t];i.insert(0,s.scope,s.parentScopes,s.fontStyle,n.getId(s.foreground),n.getId(s.background))}return new pe(n,c,i)}(e,t)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(e){if(null===e)return this._defaults;const t=e.scopeName,s=this._cachedMatchRoot.get(t).find((t=>function(e,t){if(null===t)return!0;let s=0,r=t[s];for(;e;){if(fe(e.scopeName,r)){if(s++,s===t.length)return!0;r=t[s]}e=e.parent}return!1}(e.parent,t.parentScopes)));return s?new ge(s.fontStyle,s.foreground,s.background):null}}class me{constructor(e,t){this.parent=e,this.scopeName=t}static push(e,t){for(const s of t)e=new me(e,s);return e}static from(...e){let t=null;for(let s=0;s<e.length;s++)t=new me(t,e[s]);return t}push(e){return new me(this,e)}getSegments(){let e=this;const t=[];for(;e;)t.push(e.scopeName),e=e.parent;return t.reverse(),t}toString(){return this.getSegments().join(" ")}extends(e){return this===e||null!==this.parent&&this.parent.extends(e)}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push(s.scopeName),s=s.parent;return s===e?t.reverse():void 0}}function fe(e,t){return t===e||e.startsWith(t)&&"."===e[t.length]}class ge{constructor(e,t,s){this.fontStyle=e,this.foregroundId=t,this.backgroundId=s}}class be{constructor(e,t,s,r,o,n){this.scope=e,this.parentScopes=t,this.index=s,this.fontStyle=r,this.foreground=o,this.background=n}}class ye{constructor(e){if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(e)){this._isFrozen=!0;for(let t=0,s=e.length;t<s;t++)this._color2id[e[t]]=t,this._id2color[t]=e[t]}else this._isFrozen=!1}getId(e){if(null===e)return 0;e=e.toUpperCase();let t=this._color2id[e];if(t)return t;if(this._isFrozen)throw new Error(`Missing color in color map - ${e}`);return t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e,t}getColorMap(){return this._id2color.slice(0)}}class _e{constructor(e,t,s,r,o){this.scopeDepth=e,this.parentScopes=t,this.fontStyle=s,this.foreground=r,this.background=o}clone(){return new _e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let t=[];for(let s=0,r=e.length;s<r;s++)t[s]=e[s].clone();return t}acceptOverwrite(e,t,s,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==s&&(this.foreground=s),0!==r&&(this.background=r)}}class ke{constructor(e,t=[],s={}){this._mainRule=e,this._children=s,this._rulesWithParentScopes=t}static _sortBySpecificity(e){return 1===e.length||e.sort(this._cmpBySpecificity),e}static _cmpBySpecificity(e,t){if(e.scopeDepth===t.scopeDepth){const s=e.parentScopes,r=t.parentScopes;let o=null===s?0:s.length,n=null===r?0:r.length;if(o===n)for(let e=0;e<o;e++){const t=s[e].length,o=r[e].length;if(t!==o)return o-t}return n-o}return t.scopeDepth-e.scopeDepth}match(e){if(""===e)return ke._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));let t,s,r=e.indexOf(".");return-1===r?(t=e,s=""):(t=e.substring(0,r),s=e.substring(r+1)),this._children.hasOwnProperty(t)?this._children[t].match(s):ke._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))}insert(e,t,s,r,o,n){if(""===t)return void this._doInsertHere(e,s,r,o,n);let c,i,a,u=t.indexOf(".");-1===u?(c=t,i=""):(c=t.substring(0,u),i=t.substring(u+1)),this._children.hasOwnProperty(c)?a=this._children[c]:(a=new ke(this._mainRule.clone(),_e.cloneArr(this._rulesWithParentScopes)),this._children[c]=a),a.insert(e+1,i,s,r,o,n)}_doInsertHere(e,t,s,r,o){if(null!==t){for(let n=0,c=this._rulesWithParentScopes.length;n<c;n++){let c=this._rulesWithParentScopes[n];if(0===G(c.parentScopes,t))return void c.acceptOverwrite(e,s,r,o)}-1===s&&(s=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===o&&(o=this._mainRule.background),this._rulesWithParentScopes.push(new _e(e,t,s,r,o))}else this._mainRule.acceptOverwrite(e,s,r,o)}}class Se{constructor(e,t){this.languageId=e,this.tokenType=t}}class xe{constructor(e,t){this._getBasicScopeAttributes=new F((e=>{const t=this._scopeToLanguage(e),s=this._toStandardTokenType(e);return new Se(t,s)})),this._defaultAttributes=new Se(e,8),this._embeddedLanguagesMatcher=new we(Object.entries(t||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return null===e?xe._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const t=e.match(xe.STANDARD_TOKEN_TYPE_REGEXP);if(!t)return 8;switch(t[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}}xe._NULL_SCOPE_METADATA=new Se(0,0),xe.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/;class we{constructor(e){if(0===e.length)this.values=null,this.scopesRegExp=null;else{this.values=new Map(e);const t=e.map((([e,t])=>q(e)));t.sort(),t.reverse(),this.scopesRegExp=new RegExp(`^((${t.join(")|(")}))($|\\.)`,"")}}match(e){if(!this.scopesRegExp)return;const t=e.match(this.scopesRegExp);return t?this.values.get(t[1]):void 0}}class ve{constructor(e,t){this.stack=e,this.stoppedEarly=t}}function Ce(e,t,s,r,o,n,c,i){const a=t.content.length;let u=!1,l=-1;if(c){const c=function(e,t,s,r,o,n){let c=o.beginRuleCapturedEOL?0:-1;const i=[];for(let t=o;t;t=t.pop()){const s=t.getRule(e);s instanceof ae&&i.push({rule:s,stack:t})}for(let a=i.pop();a;a=i.pop()){const{ruleScanner:i,findOptions:u}=Ae(a.rule,e,a.stack.endRule,s,r===c),l=i.findNextMatchSync(t,r,u);if(C&&(console.log("  scanning for while rule"),console.log(i.toString())),!l){C&&console.log("  popping "+a.rule.debugName+" - "+a.rule.debugWhileRegExp),o=a.stack.pop();break}if(-2!==l.ruleId){o=a.stack.pop();break}l.captureIndices&&l.captureIndices.length&&(n.produce(a.stack,l.captureIndices[0].start),Ne(e,t,s,a.stack,n,a.rule.whileCaptures,l.captureIndices),n.produce(a.stack,l.captureIndices[0].end),c=l.captureIndices[0].end,l.captureIndices[0].end>r&&(r=l.captureIndices[0].end,s=!1))}return{stack:o,linePos:r,anchorPosition:c,isFirstLine:s}}(e,t,s,r,o,n);o=c.stack,r=c.linePos,s=c.isFirstLine,l=c.anchorPosition}const d=Date.now();for(;!u;){if(0!==i&&Date.now()-d>i)return new ve(o,!0);h()}return new ve(o,!1);function h(){C&&(console.log(""),console.log(`@@scanNext ${r}: |${t.content.substr(r).replace(/\n$/,"\\n")}|`));const c=function(e,t,s,r,o,n){const c=function(e,t,s,r,o,n){const c=o.getRule(e),{ruleScanner:i,findOptions:a}=je(c,e,o.endRule,s,r===n);let u=0;C&&(u=$());const l=i.findNextMatchSync(t,r,a);if(C){const e=$()-u;e>5&&console.warn(`Rule ${c.debugName} (${c.id}) matching took ${e} against '${t}'`),console.log(`  scanning for (linePos: ${r}, anchorPosition: ${n})`),console.log(i.toString()),l&&console.log(`matched rule id: ${l.ruleId} from ${l.captureIndices[0].start} to ${l.captureIndices[0].end}`)}return l?{captureIndices:l.captureIndices,matchedRuleId:l.ruleId}:null}(e,t,s,r,o,n),i=e.getInjections();if(0===i.length)return c;const a=function(e,t,s,r,o,n,c){let i,a=Number.MAX_VALUE,u=null,l=0;const d=n.contentNameScopesList.getScopeNames();for(let n=0,h=e.length;n<h;n++){const h=e[n];if(!h.matcher(d))continue;const p=t.getRule(h.ruleId),{ruleScanner:m,findOptions:f}=je(p,t,null,r,o===c),g=m.findNextMatchSync(s,o,f);if(!g)continue;C&&(console.log(`  matched injection: ${h.debugSelector}`),console.log(m.toString()));const b=g.captureIndices[0].start;if(!(b>=a)&&(a=b,u=g.captureIndices,i=g.ruleId,l=h.priority,a===o))break}return u?{priorityMatch:-1===l,captureIndices:u,matchedRuleId:i}:null}(i,e,t,s,r,o,n);if(!a)return c;if(!c)return a;const u=c.captureIndices[0].start,l=a.captureIndices[0].start;return l<u||a.priorityMatch&&l===u?a:c}(e,t,s,r,o,l);if(!c)return C&&console.log("  no more matches."),n.produce(o,a),void(u=!0);const i=c.captureIndices,d=c.matchedRuleId,h=!!(i&&i.length>0)&&i[0].end>r;if(-1===d){const c=o.getRule(e);C&&console.log("  popping "+c.debugName+" - "+c.debugEndRegExp),n.produce(o,i[0].start),o=o.withContentNameScopesList(o.nameScopesList),Ne(e,t,s,o,n,c.endCaptures,i),n.produce(o,i[0].end);const d=o;if(o=o.parent,l=d.getAnchorPos(),!h&&d.getEnterPos()===r)return C&&console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),o=d,n.produce(o,a),void(u=!0)}else{const c=e.getRule(d);n.produce(o,i[0].start);const p=o,m=c.getName(t.content,i),f=o.contentNameScopesList.pushAttributed(m,e);if(o=o.push(d,r,l,i[0].end===a,null,f,f),c instanceof ie){const r=c;C&&console.log("  pushing "+r.debugName+" - "+r.debugBeginRegExp),Ne(e,t,s,o,n,r.beginCaptures,i),n.produce(o,i[0].end),l=i[0].end;const d=r.getContentName(t.content,i),m=f.pushAttributed(d,e);if(o=o.withContentNameScopesList(m),r.endHasBackReferences&&(o=o.withEndRule(r.getEndWithResolvedBackReferences(t.content,i))),!h&&p.hasSameRuleAs(o))return C&&console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),o=o.pop(),n.produce(o,a),void(u=!0)}else if(c instanceof ae){const r=c;C&&console.log("  pushing "+r.debugName),Ne(e,t,s,o,n,r.beginCaptures,i),n.produce(o,i[0].end),l=i[0].end;const d=r.getContentName(t.content,i),m=f.pushAttributed(d,e);if(o=o.withContentNameScopesList(m),r.whileHasBackReferences&&(o=o.withEndRule(r.getWhileWithResolvedBackReferences(t.content,i))),!h&&p.hasSameRuleAs(o))return C&&console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),o=o.pop(),n.produce(o,a),void(u=!0)}else{const r=c;if(C&&console.log("  matched "+r.debugName+" - "+r.debugMatchRegExp),Ne(e,t,s,o,n,r.captures,i),n.produce(o,i[0].end),o=o.pop(),!h)return C&&console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),o=o.safePop(),n.produce(o,a),void(u=!0)}}i[0].end>r&&(r=i[0].end,s=!1)}}function je(e,t,s,r,o){return{ruleScanner:e.compileAG(t,s,r,o),findOptions:0}}function Ae(e,t,s,r,o){return{ruleScanner:e.compileWhileAG(t,s,r,o),findOptions:0}}function Ne(e,t,s,r,o,n,c){if(0===n.length)return;const i=t.content,a=Math.min(n.length,c.length),u=[],l=c[0].end;for(let t=0;t<a;t++){const a=n[t];if(null===a)continue;const d=c[t];if(0===d.length)continue;if(d.start>l)break;for(;u.length>0&&u[u.length-1].endPos<=d.start;)o.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?o.produceFromScopes(u[u.length-1].scopes,d.start):o.produce(r,d.start),a.retokenizeCapturedWithRuleId){const t=a.getName(i,c),n=r.contentNameScopesList.pushAttributed(t,e),u=a.getContentName(i,c),l=n.pushAttributed(u,e),h=r.push(a.retokenizeCapturedWithRuleId,d.start,-1,!1,null,n,l),p=e.createOnigString(i.substring(0,d.end));Ce(e,p,s&&0===d.start,d.start,h,o,!1,0),P(p);continue}const h=a.getName(i,c);if(null!==h){const t=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).pushAttributed(h,e);u.push(new Pe(t,d.end))}}for(;u.length>0;)o.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}class Pe{constructor(e,t){this.scopes=e,this.endPos=t}}function Re(e,t,s,r,o){const n=A(t,Ee),c=ue.getCompiledRuleId(s,r,o.repository);for(const s of n)e.push({debugSelector:t,matcher:s.matcher,ruleId:c,grammar:o,priority:s.priority})}function Ee(e,t){if(t.length<e.length)return!1;let s=0;return e.every((e=>{for(let r=s;r<t.length;r++)if(Ie(t[r],e))return s=r+1,!0;return!1}))}function Ie(e,t){if(!e)return!1;if(e===t)return!0;const s=t.length;return e.length>s&&e.substr(0,s)===t&&"."===e[s]}class Le{constructor(e,t,s,r,o,n,c,i){if(this._rootScopeName=e,this.balancedBracketSelectors=n,this._onigLib=i,this._basicScopeAttributesProvider=new xe(s,r),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=c,this._grammar=Be(t,null),this._injections=null,this._tokenTypeMatchers=[],o)for(const e of Object.keys(o)){const t=A(e,Ee);for(const s of t)this._tokenTypeMatchers.push({matcher:s.matcher,type:o[e]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const e of this._ruleId2desc)e&&e.dispose()}createOnigScanner(e){return this._onigLib.createOnigScanner(e)}createOnigString(e){return this._onigLib.createOnigString(e)}getMetadataForScope(e){return this._basicScopeAttributesProvider.getBasicScopeAttributes(e)}_collectInjections(){const e=[],t=this._rootScopeName,s=(e=>e===this._rootScopeName?this._grammar:this.getExternalGrammar(e))(t);if(s){const r=s.injections;if(r)for(let t in r)Re(e,t,r[t],this,s);const o=this._grammarRepository.injections(t);o&&o.forEach((t=>{const s=this.getExternalGrammar(t);if(s){const t=s.injectionSelector;t&&Re(e,t,s,this,s)}}))}return e.sort(((e,t)=>e.priority-t.priority)),e}getInjections(){if(null===this._injections&&(this._injections=this._collectInjections(),C&&this._injections.length>0)){console.log(`Grammar ${this._rootScopeName} contains the following injections:`);for(const e of this._injections)console.log(`  - ${e.debugSelector}`)}return this._injections}registerRule(e){const t=++this._lastRuleId,s=e(t);return this._ruleId2desc[t]=s,s}getRule(e){return this._ruleId2desc[e]}getExternalGrammar(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){const s=this._grammarRepository.lookup(e);if(s)return this._includedGrammars[e]=Be(s,t&&t.$base),this._includedGrammars[e]}}tokenizeLine(e,t,s=0){const r=this._tokenize(e,t,!1,s);return{tokens:r.lineTokens.getResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}tokenizeLine2(e,t,s=0){const r=this._tokenize(e,t,!0,s);return{tokens:r.lineTokens.getBinaryResult(r.ruleStack,r.lineLength),ruleStack:r.ruleStack,stoppedEarly:r.stoppedEarly}}_tokenize(e,t,s,r){let o;if(-1===this._rootId&&(this._rootId=ue.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections()),t&&t!==Ge.NULL)o=!1,t.reset();else{o=!0;const e=this._basicScopeAttributesProvider.getDefaultAttributes(),s=this.themeProvider.getDefaults(),r=j.set(0,e.languageId,e.tokenType,null,s.fontStyle,s.foregroundId,s.backgroundId),n=this.getRule(this._rootId).getName(null,null);let c;c=n?Oe.createRootAndLookUpScopeName(n,r,this):Oe.createRoot("unknown",r),t=new Ge(null,this._rootId,-1,-1,!1,null,c,c)}e+="\n";const n=this.createOnigString(e),c=n.content.length,i=new qe(s,e,this._tokenTypeMatchers,this.balancedBracketSelectors),a=Ce(this,n,o,0,t,i,!0,r);return P(n),{lineLength:c,lineTokens:i,ruleStack:a.stack,stoppedEarly:a.stoppedEarly}}}function Be(e,t){return(e=R(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}class Oe{constructor(e,t,s){this.parent=e,this.scopePath=t,this.tokenAttributes=s}static fromExtension(e,t){let s=e,r=e?.scopePath??null;for(const e of t)r=me.push(r,e.scopeNames),s=new Oe(s,r,e.encodedTokenAttributes);return s}static createRoot(e,t){return new Oe(null,new me(null,e),t)}static createRootAndLookUpScopeName(e,t,s){const r=s.getMetadataForScope(e),o=new me(null,e),n=s.themeProvider.themeMatch(o),c=Oe.mergeAttributes(t,r,n);return new Oe(null,o,c)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return Oe.equals(this,e)}static equals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.scopeName!==t.scopeName||e.tokenAttributes!==t.tokenAttributes)return!1;e=e.parent,t=t.parent}}static mergeAttributes(e,t,s){let r=-1,o=0,n=0;return null!==s&&(r=s.fontStyle,o=s.foregroundId,n=s.backgroundId),j.set(e,t.languageId,t.tokenType,null,r,o,n)}pushAttributed(e,t){if(null===e)return this;if(-1===e.indexOf(" "))return Oe._pushAttributed(this,e,t);const s=e.split(/ /g);let r=this;for(const e of s)r=Oe._pushAttributed(r,e,t);return r}static _pushAttributed(e,t,s){const r=s.getMetadataForScope(t),o=e.scopePath.push(t),n=s.themeProvider.themeMatch(o),c=Oe.mergeAttributes(e.tokenAttributes,r,n);return new Oe(e,o,c)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){const t=[];let s=this;for(;s&&s!==e;)t.push({encodedTokenAttributes:s.tokenAttributes,scopeNames:s.scopePath.getExtensionIfDefined(s.parent?.scopePath??null)}),s=s.parent;return s===e?t.reverse():void 0}}class Ge{constructor(e,t,s,r,o,n,c,i){this.parent=e,this.ruleId=t,this.beginRuleCapturedEOL=o,this.endRule=n,this.nameScopesList=c,this.contentNameScopesList=i,this._stackElementBrand=void 0,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=s,this._anchorPos=r}equals(e){return null!==e&&Ge._equals(this,e)}static _equals(e,t){return e===t||!!this._structuralEquals(e,t)&&Oe.equals(e.contentNameScopesList,t.contentNameScopesList)}static _structuralEquals(e,t){for(;;){if(e===t)return!0;if(!e&&!t)return!0;if(!e||!t)return!1;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;e=e.parent,t=t.parent}}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Ge._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,t,s,r,o,n,c){return new Ge(this,e,t,s,r,o,n,c)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]=`(${this.ruleId}, ${this.nameScopesList?.toString()}, ${this.contentNameScopesList?.toString()})`,t}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Ge(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let t=this;for(;t&&t._enterPos===e._enterPos;){if(t.ruleId===e.ruleId)return!0;t=t.parent}return!1}toStateStackFrame(){return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:this.nameScopesList?.getExtensionIfDefined(this.parent?.nameScopesList??null)??[],contentNameScopesList:this.contentNameScopesList?.getExtensionIfDefined(this.nameScopesList)??[]}}static pushFrame(e,t){const s=Oe.fromExtension(e?.nameScopesList??null,t.nameScopesList);return new Ge(e,t.ruleId,t.enterPos??-1,t.anchorPos??-1,t.beginRuleCapturedEOL,t.endRule,s,Oe.fromExtension(s,t.contentNameScopesList))}}Ge.NULL=new Ge(null,0,0,0,!1,null,null,null);class Te{constructor(e,t){this.allowAny=!1,this.balancedBracketScopes=e.flatMap((e=>"*"===e?(this.allowAny=!0,[]):A(e,Ee).map((e=>e.matcher)))),this.unbalancedBracketScopes=t.flatMap((e=>A(e,Ee).map((e=>e.matcher))))}get matchesAlways(){return this.allowAny&&0===this.unbalancedBracketScopes.length}get matchesNever(){return 0===this.balancedBracketScopes.length&&!this.allowAny}match(e){for(const t of this.unbalancedBracketScopes)if(t(e))return!1;for(const t of this.balancedBracketScopes)if(t(e))return!0;return this.allowAny}}class qe{constructor(e,t,s,r){this.balancedBracketSelectors=r,this._emitBinaryTokens=e,this._tokenTypeOverrides=s,this._lineText=C?t:null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(e,t){this.produceFromScopes(e.contentNameScopesList,t)}produceFromScopes(e,t){if(this._lastTokenEndIndex>=t)return;if(this._emitBinaryTokens){let s=e?.tokenAttributes??0,r=!1;if(this.balancedBracketSelectors?.matchesAlways&&(r=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const t=e?.getScopeNames()??[];for(const e of this._tokenTypeOverrides)e.matcher(t)&&(s=j.set(s,0,e.type,null,-1,0,0));this.balancedBracketSelectors&&(r=this.balancedBracketSelectors.match(t))}if(r&&(s=j.set(s,0,8,r,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===s)return void(this._lastTokenEndIndex=t);if(C){const s=e?.getScopeNames()??[];console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<s.length;e++)console.log("      * "+s[e])}return this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(s),void(this._lastTokenEndIndex=t)}const s=e?.getScopeNames()??[];if(C){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(let e=0;e<s.length;e++)console.log("      * "+s[e])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:s}),this._lastTokenEndIndex=t}getResult(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);const s=new Uint32Array(this._binaryTokens.length);for(let e=0,t=this._binaryTokens.length;e<t;e++)s[e]=this._binaryTokens[e];return s}}function Fe(e,t,s){const r=e.length;let o=0,n=1,c=0;function i(t){if(null===s)o+=t;else for(;t>0;)10===e.charCodeAt(o)?(o++,n++,c=0):(o++,c++),t--}function a(e){null===s?o=e:i(e-o)}function u(){for(;o<r;){let t=e.charCodeAt(o);if(32!==t&&9!==t&&13!==t&&10!==t)break;i(1)}}function l(t){return e.substr(o,t.length)===t&&(i(t.length),!0)}function d(t){let s=e.indexOf(t,o);a(-1!==s?s+t.length:r)}function h(t){let s=e.indexOf(t,o);if(-1!==s){let r=e.substring(o,s);return a(s+t.length),r}{let t=e.substr(o);return a(r),t}}r>0&&65279===e.charCodeAt(0)&&(o=1);let p=0,m=null,f=[],g=[],b=null;function y(e,t){f.push(p),g.push(m),p=e,m=t}function _(){if(0===f.length)return k("illegal state stack");p=f.pop(),m=g.pop()}function k(t){throw new Error("Near offset "+o+": "+t+" ~~~"+e.substr(o,50)+"~~~")}const S=function(){if(null===b)return k("missing <key>");let e={};null!==s&&(e[s]={filename:t,line:n,char:c}),m[b]=e,b=null,y(1,e)},x=function(){if(null===b)return k("missing <key>");let e=[];m[b]=e,b=null,y(2,e)},w=function(){let e={};null!==s&&(e[s]={filename:t,line:n,char:c}),m.push(e),y(1,e)},v=function(){let e=[];m.push(e),y(2,e)};function C(){if(1!==p)return k("unexpected </dict>");_()}function j(){return 1===p||2!==p?k("unexpected </array>"):void _()}function A(e){if(1===p){if(null===b)return k("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function N(e){if(isNaN(e))return k("cannot parse float");if(1===p){if(null===b)return k("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function P(e){if(isNaN(e))return k("cannot parse integer");if(1===p){if(null===b)return k("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function R(e){if(1===p){if(null===b)return k("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function E(e){if(1===p){if(null===b)return k("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function I(e){if(1===p){if(null===b)return k("missing <key>");m[b]=e,b=null}else 2===p?m.push(e):m=e}function L(){let e=h(">"),t=!1;return 47===e.charCodeAt(e.length-1)&&(t=!0,e=e.substring(0,e.length-1)),{name:e.trim(),isClosed:t}}function B(e){if(e.isClosed)return"";let t=h("</");return d(">"),t.replace(/&#([0-9]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,10))})).replace(/&#x([0-9a-f]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,(function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e}))}for(;o<r&&(u(),!(o>=r));){const a=e.charCodeAt(o);if(i(1),60!==a)return k("expected <");if(o>=r)return k("unexpected end of input");const h=e.charCodeAt(o);if(63===h){i(1),d("?>");continue}if(33===h){if(i(1),l("--")){d("--\x3e");continue}d(">");continue}if(47===h){if(i(1),u(),l("plist")){d(">");continue}if(l("dict")){d(">"),C();continue}if(l("array")){d(">"),j();continue}return k("unexpected closed tag")}let f=L();switch(f.name){case"dict":1===p?S():2===p?w():(m={},null!==s&&(m[s]={filename:t,line:n,char:c}),y(1,m)),f.isClosed&&C();continue;case"array":1===p?x():2===p?v():(m=[],y(2,m)),f.isClosed&&j();continue;case"key":O=B(f),1!==p?k("unexpected <key>"):null!==b?k("too many <key>"):b=O;continue;case"string":A(B(f));continue;case"real":N(parseFloat(B(f)));continue;case"integer":P(parseInt(B(f),10));continue;case"date":R(new Date(B(f)));continue;case"data":E(B(f));continue;case"true":B(f),I(!0);continue;case"false":B(f),I(!1);continue}if(!/^plist/.test(f.name))return k("unexpected opened tag "+f.name)}var O;return m}function $e(e,t){throw new Error("Near offset "+e.pos+": "+t+" ~~~"+e.source.substr(e.pos,50)+"~~~")}class Me{constructor(e){this.source=e,this.pos=0,this.len=e.length,this.line=1,this.char=0}}class We{constructor(){this.value=null,this.type=0,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}toLocation(e){return{filename:e,line:this.line,char:this.char}}}function Ue(e,t){t.value=null,t.type=0,t.offset=-1,t.len=-1,t.line=-1,t.char=-1;let s,r=e.source,o=e.pos,n=e.len,c=e.line,i=e.char;for(;;){if(o>=n)return!1;if(s=r.charCodeAt(o),32!==s&&9!==s&&13!==s){if(10!==s)break;o++,c++,i=0}else o++,i++}if(t.offset=o,t.line=c,t.char=i,34===s){for(t.type=1,o++,i++;;){if(o>=n)return!1;if(s=r.charCodeAt(o),o++,i++,92!==s){if(34===s)break}else o++,i++}t.value=r.substring(t.offset+1,o-1).replace(/\\u([0-9A-Fa-f]{4})/g,((e,t)=>String.fromCodePoint(parseInt(t,16)))).replace(/\\(.)/g,((t,s)=>{switch(s){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:$e(e,"invalid escape sequence")}throw new Error("unreachable")}))}else if(91===s)t.type=2,o++,i++;else if(123===s)t.type=3,o++,i++;else if(93===s)t.type=4,o++,i++;else if(125===s)t.type=5,o++,i++;else if(58===s)t.type=6,o++,i++;else if(44===s)t.type=7,o++,i++;else if(110===s){if(t.type=8,o++,i++,s=r.charCodeAt(o),117!==s)return!1;if(o++,i++,s=r.charCodeAt(o),108!==s)return!1;if(o++,i++,s=r.charCodeAt(o),108!==s)return!1;o++,i++}else if(116===s){if(t.type=9,o++,i++,s=r.charCodeAt(o),114!==s)return!1;if(o++,i++,s=r.charCodeAt(o),117!==s)return!1;if(o++,i++,s=r.charCodeAt(o),101!==s)return!1;o++,i++}else if(102===s){if(t.type=10,o++,i++,s=r.charCodeAt(o),97!==s)return!1;if(o++,i++,s=r.charCodeAt(o),108!==s)return!1;if(o++,i++,s=r.charCodeAt(o),115!==s)return!1;if(o++,i++,s=r.charCodeAt(o),101!==s)return!1;o++,i++}else for(t.type=11;;){if(o>=n)return!1;if(s=r.charCodeAt(o),!(46===s||s>=48&&s<=57||101===s||69===s||45===s||43===s))break;o++,i++}return t.len=o-t.offset,null===t.value&&(t.value=r.substr(t.offset,t.len)),e.pos=o,e.line=c,e.char=i,!0}class De{constructor(e,t){this._onigLibPromise=t,this._grammars=new Map,this._rawGrammars=new Map,this._injectionGrammars=new Map,this._theme=e}dispose(){for(const e of this._grammars.values())e.dispose()}setTheme(e){this._theme=e}getColorMap(){return this._theme.getColorMap()}addGrammar(e,t){this._rawGrammars.set(e.scopeName,e),t&&this._injectionGrammars.set(e.scopeName,t)}lookup(e){return this._rawGrammars.get(e)}injections(e){return this._injectionGrammars.get(e)}getDefaults(){return this._theme.getDefaults()}themeMatch(e){return this._theme.match(e)}async grammarForScopeName(e,t,s,r,o){if(!this._grammars.has(e)){let n=this._rawGrammars.get(e);if(!n)return null;this._grammars.set(e,function(e,t,s,r,o,n,c,i){return new Le(e,t,s,r,o,n,c,i)}(e,n,t,s,r,o,this,await this._onigLibPromise))}return this._grammars.get(e)}}function ze(e,t){let s=0;const r=[];let o=e,n=t;for(;o!==n;)o&&(!n||o.depth>=n.depth)?(s++,o=o.parent):(r.push(n.toStateStackFrame()),n=n.parent);return{pops:s,newFrames:r.reverse()}}function He(e,t){let s=e;for(let e=0;e<t.pops;e++)s=s.parent;for(const e of t.newFrames)s=Ge.pushFrame(s,e);return s}class Qe{constructor(e){this._options=e,this._syncRegistry=new De(pe.createFromRawTheme(e.theme,e.colorMap),e.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(e,t){this._syncRegistry.setTheme(pe.createFromRawTheme(e,t))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(e,t,s){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:s})}loadGrammarWithConfiguration(e,t,s){return this._loadGrammar(e,t,s.embeddedLanguages,s.tokenTypes,new Te(s.balancedBracketSelectors||[],s.unbalancedBracketSelectors||[]))}loadGrammar(e){return this._loadGrammar(e,0,null,null,null)}async _loadGrammar(e,t,s,r,o){const n=new D(this._syncRegistry,e);for(;n.Q.length>0;)await Promise.all(n.Q.map((e=>this._loadSingleGrammar(e.scopeName)))),n.processQueue();return this._grammarForScopeName(e,t,s,r,o)}async _loadSingleGrammar(e){return this._ensureGrammarCache.has(e)||this._ensureGrammarCache.set(e,this._doLoadSingleGrammar(e)),this._ensureGrammarCache.get(e)}async _doLoadSingleGrammar(e){const t=await this._options.loadGrammar(e);if(t){const s="function"==typeof this._options.getInjections?this._options.getInjections(e):void 0;this._syncRegistry.addGrammar(t,s)}}async addGrammar(e,t=[],s=0,r=null){return this._syncRegistry.addGrammar(e,t),await this._grammarForScopeName(e.scopeName,s,r)}_grammarForScopeName(e,t=0,s=null,r=null,o=null){return this._syncRegistry.grammarForScopeName(e,t,s,r,o)}}const Ke=Ge.NULL,Ve=function(e,t=null){return null!==t&&/\.json$/.test(t)?(s=e,C?function(e,t,s){let r=new Me(e),o=new We,n=0,c=null,i=[],a=[];function u(){i.push(n),a.push(c)}function l(){n=i.pop(),c=a.pop()}function d(e){$e(r,e)}for(;Ue(r,o);){if(0===n){if(null!==c&&d("too many constructs in root"),3===o.type){c={},c.$vscodeTextmateLocation=o.toLocation(t),u(),n=1;continue}if(2===o.type){c=[],u(),n=4;continue}d("unexpected token in root")}if(2===n){if(5===o.type){l();continue}if(7===o.type){n=3;continue}d("expected , or }")}if(1===n||3===n){if(1===n&&5===o.type){l();continue}if(1===o.type){let e=o.value;if(Ue(r,o)&&6===o.type||d("expected colon"),Ue(r,o)||d("expected value"),n=2,1===o.type){c[e]=o.value;continue}if(8===o.type){c[e]=null;continue}if(9===o.type){c[e]=!0;continue}if(10===o.type){c[e]=!1;continue}if(11===o.type){c[e]=parseFloat(o.value);continue}if(2===o.type){let t=[];c[e]=t,u(),n=4,c=t;continue}if(3===o.type){let s={};s.$vscodeTextmateLocation=o.toLocation(t),c[e]=s,u(),n=1,c=s;continue}}d("unexpected token in dict")}if(5===n){if(4===o.type){l();continue}if(7===o.type){n=6;continue}d("expected , or ]")}if(4===n||6===n){if(4===n&&4===o.type){l();continue}if(n=5,1===o.type){c.push(o.value);continue}if(8===o.type){c.push(null);continue}if(9===o.type){c.push(!0);continue}if(10===o.type){c.push(!1);continue}if(11===o.type){c.push(parseFloat(o.value));continue}if(2===o.type){let e=[];c.push(e),u(),n=4,c=e;continue}if(3===o.type){let e={};e.$vscodeTextmateLocation=o.toLocation(t),c.push(e),u(),n=1,c=e;continue}d("unexpected token in array")}d("unknown state")}return 0!==a.length&&d("unclosed constructs"),c}(s,t):JSON.parse(s)):function(e,t){return C?function(e,t,s){return Fe(e,t,"$vscodeTextmateLocation")}(e,t):function(e){return Fe(e,null,null)}(e)}(e,t);var s};var Ye=v.Bz,Xe=("undefined"!=typeof document&&document.currentScript&&document.currentScript.src,function(e){var t,s,r=void 0!==(e=e||{})?e:{};r.ready=new Promise((function(e,r){t=e,s=r}));var o,n=Object.assign({},r),c=!1;o=function(e){let t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(t=read(e,"binary"),"object"==typeof t||w(s),t);var s},"undefined"!=typeof scriptArgs&&scriptArgs,"undefined"!=typeof onig_print&&("undefined"==typeof console&&(console={}),console.log=onig_print,console.warn=console.error="undefined"!=typeof printErr?printErr:onig_print);var i,a,u=r.print||console.log.bind(console),l=r.printErr||console.warn.bind(console);Object.assign(r,n),n=null,r.arguments&&r.arguments,r.thisProgram&&r.thisProgram,r.quit&&r.quit,r.wasmBinary&&(i=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&w("no native wasm support detected");var d,h,p,m=!1,f="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function g(e,t,s){for(var r=t+s,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.buffer&&f)return f.decode(e.subarray(t,o));for(var n="";t<o;){var c=e[t++];if(128&c){var i=63&e[t++];if(192!=(224&c)){var a=63&e[t++];if((c=224==(240&c)?(15&c)<<12|i<<6|a:(7&c)<<18|i<<12|a<<6|63&e[t++])<65536)n+=String.fromCharCode(c);else{var u=c-65536;n+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else n+=String.fromCharCode((31&c)<<6|i)}else n+=String.fromCharCode(c)}return n}function b(e){d=e,r.HEAP8=new Int8Array(e),r.HEAP16=new Int16Array(e),r.HEAP32=new Int32Array(e),r.HEAPU8=h=new Uint8Array(e),r.HEAPU16=new Uint16Array(e),r.HEAPU32=p=new Uint32Array(e),r.HEAPF32=new Float32Array(e),r.HEAPF64=new Float64Array(e)}r.INITIAL_MEMORY;var y=[],_=[],k=[],S=0,x=null;function w(e){r.onAbort&&r.onAbort(e),l(e="Aborted("+e+")"),m=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw s(t),t}var v,C,j,A="data:application/octet-stream;base64,";function N(e){return e.startsWith(A)}function P(e){try{if(e==v&&i)return new Uint8Array(i);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){w(e)}}function R(e){for(;e.length>0;)e.shift()(r)}function E(e){try{return a.grow(e-d.byteLength+65535>>>16),b(a.buffer),1}catch(e){}}N(v="onig.wasm")||(C=v,v=r.locateFile?r.locateFile(C,""):""+C),j="undefined"!=typeof dateNow?dateNow:()=>performance.now();var I=[null,[],[]];function L(e,t){var s=I[e];0===t||10===t?((1===e?u:l)(g(s,0)),s.length=0):s.push(t)}var B,O={emscripten_get_now:j,emscripten_memcpy_big:function(e,t,s){h.copyWithin(e,t,t+s)},emscripten_resize_heap:function(e){var t=h.length,s=2147483648;if((e>>>=0)>s)return!1;let r=(e,t)=>e+(t-e%t)%t;for(var o=1;o<=4;o*=2){var n=t*(1+.2/o);if(n=Math.min(n,e+100663296),E(Math.min(s,r(Math.max(e,n),65536))))return!0}return!1},fd_write:function(e,t,s,r){for(var o=0,n=0;n<s;n++){var c=p[t>>2],i=p[t+4>>2];t+=8;for(var a=0;a<i;a++)L(e,h[c+a]);o+=i}return p[r>>2]=o,0}};function G(e){function s(){B||(B=!0,r.calledRun=!0,m||(R(_),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),k.unshift(e);var e;R(k)}()))}S>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),y.unshift(e);var e;R(y)}(),S>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),s()}),1)):s()))}if(function(){var e={env:O,wasi_snapshot_preview1:O};function t(e,t){var s,o=e.exports;r.asm=o,b((a=r.asm.memory).buffer),r.asm.__indirect_function_table,s=r.asm.__wasm_call_ctors,_.unshift(s),function(e){if(S--,r.monitorRunDependencies&&r.monitorRunDependencies(S),0==S&&x){var t=x;x=null,t()}}()}function o(e){t(e.instance)}function n(t){return(!i&&c&&"function"==typeof fetch?fetch(v,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+v+"'";return e.arrayBuffer()})).catch((function(){return P(v)})):Promise.resolve().then((function(){return P(v)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){l("failed to asynchronously prepare wasm: "+e),w(e)}))}if(S++,r.monitorRunDependencies&&r.monitorRunDependencies(S),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){l("Module.instantiateWasm callback failed with error: "+e),s(e)}(i||"function"!=typeof WebAssembly.instantiateStreaming||N(v)||"function"!=typeof fetch?n(o):fetch(v,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(o,(function(e){return l("wasm streaming compile failed: "+e),l("falling back to ArrayBuffer instantiation"),n(o)}))}))).catch(s)}(),r.___wasm_call_ctors=function(){return(r.___wasm_call_ctors=r.asm.__wasm_call_ctors).apply(null,arguments)},r.___errno_location=function(){return(r.___errno_location=r.asm.__errno_location).apply(null,arguments)},r._omalloc=function(){return(r._omalloc=r.asm.omalloc).apply(null,arguments)},r._ofree=function(){return(r._ofree=r.asm.ofree).apply(null,arguments)},r._getLastOnigError=function(){return(r._getLastOnigError=r.asm.getLastOnigError).apply(null,arguments)},r._createOnigScanner=function(){return(r._createOnigScanner=r.asm.createOnigScanner).apply(null,arguments)},r._freeOnigScanner=function(){return(r._freeOnigScanner=r.asm.freeOnigScanner).apply(null,arguments)},r._findNextOnigScannerMatch=function(){return(r._findNextOnigScannerMatch=r.asm.findNextOnigScannerMatch).apply(null,arguments)},r._findNextOnigScannerMatchDbg=function(){return(r._findNextOnigScannerMatchDbg=r.asm.findNextOnigScannerMatchDbg).apply(null,arguments)},r.stackSave=function(){return(r.stackSave=r.asm.stackSave).apply(null,arguments)},r.stackRestore=function(){return(r.stackRestore=r.asm.stackRestore).apply(null,arguments)},r.stackAlloc=function(){return(r.stackAlloc=r.asm.stackAlloc).apply(null,arguments)},r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.dynCall_jiji).apply(null,arguments)},r.UTF8ToString=function(e,t){return e?g(h,e,t):""},x=function e(){B||G(),B||(x=e)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return G(),e.ready});let Je=null;class Ze{static _utf8ByteLength(e){let t=0;for(let s=0,r=e.length;s<r;s++){const o=e.charCodeAt(s);let n=o,c=!1;if(o>=55296&&o<=56319&&s+1<r){const t=e.charCodeAt(s+1);t>=56320&&t<=57343&&(n=65536+(o-55296<<10)|t-56320,c=!0)}t+=n<=127?1:n<=2047?2:n<=65535?3:4,c&&s++}return t}constructor(e){const t=e.length,s=Ze._utf8ByteLength(e),r=s!==t,o=r?new Uint32Array(t+1):null;r&&(o[t]=s);const n=r?new Uint32Array(s+1):null;r&&(n[s]=t);const c=new Uint8Array(s);let i=0;for(let s=0;s<t;s++){const a=e.charCodeAt(s);let u=a,l=!1;if(a>=55296&&a<=56319&&s+1<t){const t=e.charCodeAt(s+1);t>=56320&&t<=57343&&(u=65536+(a-55296<<10)|t-56320,l=!0)}r&&(o[s]=i,l&&(o[s+1]=i),u<=127?n[i+0]=s:u<=2047?(n[i+0]=s,n[i+1]=s):u<=65535?(n[i+0]=s,n[i+1]=s,n[i+2]=s):(n[i+0]=s,n[i+1]=s,n[i+2]=s,n[i+3]=s)),u<=127?c[i++]=u:u<=2047?(c[i++]=192|(1984&u)>>>6,c[i++]=128|(63&u)>>>0):u<=65535?(c[i++]=224|(61440&u)>>>12,c[i++]=128|(4032&u)>>>6,c[i++]=128|(63&u)>>>0):(c[i++]=240|(1835008&u)>>>18,c[i++]=128|(258048&u)>>>12,c[i++]=128|(4032&u)>>>6,c[i++]=128|(63&u)>>>0),l&&s++}this.utf16Length=t,this.utf8Length=s,this.utf16Value=e,this.utf8Value=c,this.utf16OffsetToUtf8=o,this.utf8OffsetToUtf16=n}createString(e){const t=e._omalloc(this.utf8Length);return e.HEAPU8.set(this.utf8Value,t),t}}class et{constructor(e){if(this.id=++et.LAST_ID,!Je)throw new Error("Must invoke loadWASM first.");this._onigBinding=Je,this.content=e;const t=new Ze(e);this.utf16Length=t.utf16Length,this.utf8Length=t.utf8Length,this.utf16OffsetToUtf8=t.utf16OffsetToUtf8,this.utf8OffsetToUtf16=t.utf8OffsetToUtf16,this.utf8Length<1e4&&!et._sharedPtrInUse?(et._sharedPtr||(et._sharedPtr=Je._omalloc(1e4)),et._sharedPtrInUse=!0,Je.HEAPU8.set(t.utf8Value,et._sharedPtr),this.ptr=et._sharedPtr):this.ptr=t.createString(Je)}convertUtf8OffsetToUtf16(e){return this.utf8OffsetToUtf16?e<0?0:e>this.utf8Length?this.utf16Length:this.utf8OffsetToUtf16[e]:e}convertUtf16OffsetToUtf8(e){return this.utf16OffsetToUtf8?e<0?0:e>this.utf16Length?this.utf8Length:this.utf16OffsetToUtf8[e]:e}dispose(){this.ptr===et._sharedPtr?et._sharedPtrInUse=!1:this._onigBinding._ofree(this.ptr)}}et.LAST_ID=0,et._sharedPtr=0,et._sharedPtrInUse=!1;class tt{constructor(e){if(!Je)throw new Error("Must invoke loadWASM first.");const t=[],s=[];for(let r=0,o=e.length;r<o;r++){const o=new Ze(e[r]);t[r]=o.createString(Je),s[r]=o.utf8Length}const r=Je._omalloc(4*e.length);Je.HEAPU32.set(t,r/4);const o=Je._omalloc(4*e.length);Je.HEAPU32.set(s,o/4);const n=Je._createOnigScanner(r,o,e.length);for(let s=0,r=e.length;s<r;s++)Je._ofree(t[s]);Je._ofree(o),Je._ofree(r),0===n&&function(e){throw new Error(e.UTF8ToString(e._getLastOnigError()))}(Je),this._onigBinding=Je,this._ptr=n}dispose(){this._onigBinding._freeOnigScanner(this._ptr)}findNextMatchSync(e,t,s){let r=false,o=0;if("number"==typeof s?(8&s&&(r=!0),o=s):"boolean"==typeof s&&(r=s),"string"==typeof e){e=new et(e);const s=this._findNextMatchSync(e,t,r,o);return e.dispose(),s}return this._findNextMatchSync(e,t,r,o)}_findNextMatchSync(e,t,s,r){const o=this._onigBinding;let n;if(n=s?o._findNextOnigScannerMatchDbg(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r):o._findNextOnigScannerMatch(this._ptr,e.id,e.ptr,e.utf8Length,e.convertUtf16OffsetToUtf8(t),r),0===n)return null;const c=o.HEAPU32;let i=n/4;const a=c[i++],u=c[i++];let l=[];for(let t=0;t<u;t++){const s=e.convertUtf8OffsetToUtf16(c[i++]),r=e.convertUtf8OffsetToUtf16(c[i++]);l[t]={start:s,end:r,length:r-s}}return{index:a,captureIndices:l}}}let st=!1,rt=null;function ot(e){if(st)return rt;let t,s,r,o;if(st=!0,function(e){return"function"==typeof e.instantiator}(e))t=e.instantiator,s=e.print;else{let r;!function(e){return void 0!==e.data}(e)?r=e:(r=e.data,s=e.print),t=function(e){return"undefined"!=typeof Response&&e instanceof Response}(r)?"function"==typeof WebAssembly.instantiateStreaming?function(e){return t=>WebAssembly.instantiateStreaming(e,t)}(r):function(e){return async t=>{const s=await e.arrayBuffer();return WebAssembly.instantiate(s,t)}}(r):function(e){return t=>WebAssembly.instantiate(e,t)}(r)}return rt=new Promise(((e,t)=>{r=e,o=t})),function(e,t,s,r){Xe({print:t,instantiateWasm:(t,s)=>{if("undefined"==typeof performance){const e=()=>Date.now();t.env.emscripten_get_now=e,t.wasi_snapshot_preview1.emscripten_get_now=e}return e(t).then((e=>s(e.instance)),r),{}}}).then((e=>{Je=e,s()}))}(t,s,r,o),rt}function nt(e){return new et(e)}function ct(e){return new tt(e)}function it(e){const t=S[e];if(!t)return;const{id:s}=x[t];return{id:s,scopeName:t}}const at=new Map;let ut,lt;async function dt(e){if(at.has(e))return at.get(e);const r=function(e){return x[e]}(e);if(!r)return Promise.resolve(void 0);let o;if(void 0===ut&&(o=t(r.id),ut=o.then((()=>!0)).catch((()=>!1))),void 0===lt&&(lt=await ut),lt){const s=o||t(r.id);return at.set(e,s),s}const n=s(`grammars/${r.id}`);r.embeddedScopes.forEach((e=>{if(!at.has(e)){const t=n.then((t=>null==t?void 0:t.find((t=>t.scopeName===e))));at.set(e,t)}}));const c=n.then((t=>null==t?void 0:t.find((t=>t.scopeName===e))));return at.set(e,c),c}const ht=30720,pt=16744448,mt=16775168,ft=11,gt=15,bt={NotSet:-1,None:0,Italic:1,Bold:2,Underline:4,Strikethrough:8};function yt(e,t,s,r){const{tokens:o,ruleStack:n}=e.tokenizeLine2(s,t),c=[];let i=s.length;for(let e=o.length-2;e>=0;e-=2){const t=o[e],r=o[e+1],n=s.slice(t,i);c.unshift({content:n,metadata:r}),i=t}let a=[];if(null==r?void 0:r.preserveWhitespace)a=c;else for(let e=0;e<c.length;e++){const t=c[e];if(""!==t.content.trim()){const e=a[a.length-1];e&&(e.metadata&mt)==(t.metadata&mt)?e.content+=t.content:a.push(t)}else a.length>0?a[a.length-1].content+=t.content:e<c.length-1?c[e+1].content=t.content+c[e+1].content:a.push(t)}return{rawTokens:a,nextStack:n}}function _t(e,t,s){let r=null;return e.split(/\r?\n|\r/g).map((e=>{const{rawTokens:o,nextStack:n}=yt(t,r,e,{preserveWhitespace:!0}),c=o.map((({content:e,metadata:t})=>({content:e,style:kt(t,s)}))),i=function(e,t,s,r){const{tokens:o}=s.tokenizeLine(e,t),n=[];for(let t=0;t<o.length;t++){const{startIndex:s,endIndex:c,scopes:i}=o[t];let a=0;const u=r.find((e=>{if(a+=e.content.length,s<a)return!0}));n.push(Object.assign(Object.assign({},u),{content:e.slice(s,c),scopes:i.reverse()}))}return n}(e,r,t,c);return r=n,i}))}function kt(e,t){const s={color:t[(e&pt)>>>gt]},r=(e&ht)>>>ft;return r&bt.Italic&&(s.fontStyle="italic"),r&bt.Bold&&(s.fontWeight="bold"),r&bt.Underline&&(s.textDecoration="underline"),r&bt.Strikethrough&&(s.textDecoration="line-through"),s}var St={instantiator:t=>WebAssembly.instantiate(e,t).then((e=>({instance:e})))};let xt=null;function wt(e){return"text"==e||"terminal"==e}function vt(e){if(!xt){const e=ot(St).then((()=>({createOnigScanner:ct,createOnigString:nt})));xt=new Ye({onigLib:e,loadGrammar:e=>dt(e)})}const t=e.filter((e=>!wt(e))).map((e=>{const t=it(e);if(!t)throw new jt(e);return xt.loadGrammar(t.scopeName)}));return Promise.all(t)}function Ct(e){if(wt(e))return{langId:e,grammar:null};const t=it(e);if(!t)throw new jt(e);const s=function(e){const{_syncRegistry:t}=xt;return null==t?void 0:t._grammars.get(e)}(t.scopeName);if(!s)throw new Error(`Syntax highlighting error: grammar for ${e} not loaded`);return{langId:t.id,grammar:s}}class jt extends Error{constructor(e){super(`Unknown language: ${e}`),this.alias=e}}function At(e,t,s){xt.setTheme(s);const r=function(e){const t=xt.getColorMap();return e.colorNames?t.map((t=>Object.keys(e.colorNames).find((s=>e.colorNames[s].toUpperCase()===t.toUpperCase()))||t)):t}(s);return function(e,t,s){let r=null;return e.split(/\r?\n|\r/g).map((e=>{const{rawTokens:o,nextStack:n}=yt(t,r,e);return r=n,o.map((({content:e,metadata:t})=>({content:e,style:kt(t,s)})))}))}(e,t,r)}function Nt(e){return e.split(/\r?\n|\r/g).map((e=>[{content:e,style:{}}]))}function Pt(e,t){return Et(e.slice(1,-1)).map((e=>{const{from:s,to:r}=Rt(e);return{lineNumber:t,fromColumn:s,toColumn:r}}))}function Rt(e){const[t,s]=e.split(":");if(!It(t))throw new Lt(t);const r=Number(t);if(r<1)throw new Bt;if(s){if(!It(s))throw new Lt(s);return{from:r,to:+s}}return{from:r,to:r}}function Et(e){return e.split(/,(?![^\[]*\])/g)}function It(e){e=e.toString();var t=Math.abs(e),s=parseInt(e,10);return!isNaN(t)&&s===t&&t.toString()===e}class Lt extends Error{constructor(e){super(`Invalid number "${e}" in range string`),this.number=e,Object.setPrototypeOf(this,new.target.prototype)}}class Bt extends Error{constructor(){super("Invalid line or column number in range string"),Object.setPrototypeOf(this,new.target.prototype)}}const Ot="#001",Gt="#010",Tt={name:"comments",type:"light",foreground:"",background:"",colors:{},settings:[{settings:{foreground:"#000"}},{scope:["punctuation.definition.comment"],settings:{foreground:Ot}},{scope:"comment",settings:{foreground:Gt}}]};function qt(e,t,s,r){const o=t?At(e,t,Tt):Nt(e),n=[];let c=1;const i=o.map((e=>{const{annotations:t,lineWithoutComments:o}=function(e,t,s,r){if(r in Ft&&e.some((e=>e.style.color===Gt))){const t=Ft[r];e=e.flatMap((e=>{if(e.style.color!==Gt)return[e];const s=e.content.trimStart();if(s.startsWith(t)){const r=s.slice(t.length),o=[{content:e.content.slice(0,e.content.length-r.length),style:{color:Ot}}];return r.length&&o.push({content:r,style:e.style}),o}return[e]}))}if(!e.some((e=>e.style.color===Ot)))return{annotations:[],lineWithoutComments:e};const o=[];let n=0;for(;n<e.length;){const r=e[n];if(r.style.color!==Gt){n++;continue}const c="function"==typeof t?t(r.content):Mt(r.content,t);if(!c){n++;continue}const{name:i,query:a,rangeString:u}=c,l=e[n-1],d=e[n+1],h=[];l&&l.style.color===Ot&&h.push(l),h.push(r),d&&d.style.color===Ot&&h.push(d),o.push({tokens:h,name:i,query:a,rangeString:u,lineNumber:s}),n+=2}let c=e;for(const e of o)c=c.filter((t=>!e.tokens.includes(t)));c.every((e=>""===e.content.trim()))&&(c=null);return{annotations:o.map((e=>({name:e.name,query:e.query,lineNumber:e.lineNumber,rangeString:e.rangeString}))),lineWithoutComments:c}}(e,r,c,s);if(n.push(...t),!o)return null;const i=o.map((e=>e.content)).join("");return["mdx","jsx","tsx"].includes(s)&&t.length>0&&"{}"===i.trim()?null:(c++,i)})).filter((e=>null!==e)).join("\n"),a=n.map((e=>{var{rangeString:t,lineNumber:s}=e,r=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(s[r[o]]=e[r[o]])}return s}(e,["rangeString","lineNumber"]);return Object.assign(Object.assign({},r),{ranges:$t(t,s,i)})})).filter((e=>e.ranges.length>0));return{newCode:i,annotations:a}}const Ft={"actionscript-3":"//",ada:"--",asm:"#",dart:"//",fsharp:"//",graphql:"#",http:"#",rust:"//",sparql:"#",wgsl:"//",jsonnet:"//",kql:"//",zenscript:"//",kusto:"//",turtle:"#",abap:"*",beancount:";",kotlin:"//",hlsl:"//",berry:"#",cypher:"//",elm:"--",nix:"#",viml:'"',solidity:"//",bat:"REM",shaderlab:"//",sas:"*",clarity:";;"};function $t(e,t,s){return e&&e.startsWith("(/")?function(e,t,s){const r=t.match(/\(\/([\s\S]*?)\/([gimuy]*)\)/);if(!r)throw new Error(`Invalid RegExp string: ${t}`);const o=new RegExp(r[1],r[2]),n=e.split(/\r?\n/).slice(s-1).join("\n");if(!o.global){const e=o.exec(n);if(!e)return[];const t=n.slice(0,e.index).split("\n").length+s-1;return[{fromLineNumber:t,toLineNumber:t+e[0].split("\n").length-1}]}let c;const i=[];for(;c=o.exec(n);){const e=n.slice(0,c.index).split("\n").length+s-1,t=e+c[0].split("\n").length-1,r=i[i.length-1];r&&r.fromLineNumber===e||i.push({fromLineNumber:e,toLineNumber:t})}return i}(s,e,t):e&&e.startsWith("[/")?function(e,t,s){const r=t.match(/\[\/([\s\S]*?)\/([gimuy]*)\]/);if(!r)throw new Error(`Invalid RegExp string: ${t}`);let o=r[2]||"";o+="d";const n=new RegExp(r[1],o);let c=e.split(/\r?\n/);c=c.slice(s-1),n.multiline||(c=[c[0]]);const i=[];return c.forEach(((e,t)=>{if(!n.global){if(i.length>0)return;const r=n.exec(e);if(!r)return;const o=r.indices[1]||r.indices[0];return void i.push({lineNumber:t+s,fromColumn:o[0]+1,toColumn:o[1]})}let r;for(;r=n.exec(e);){const e=r.indices[1]||r.indices[0];i.push({lineNumber:t+s,fromColumn:e[0]+1,toColumn:e[1]})}})),i}(s,e,t):function(e,t){return e?e.startsWith("[")?Pt(e,t):Et(e.slice(1,-1)).map((e=>{if(e.includes("[")){const[s,r]=e.split("["),o=Number(s),n=t+o-1;if(!It(n))throw new Lt(s);return Pt("["+r,n)}const{from:s,to:r}=Rt(e);return[{fromLineNumber:s+t-1,toLineNumber:r+t-1}]})).flat():[{fromLineNumber:t,toLineNumber:t}]}(e,t)}function Mt(e,t){var s;const r=e.match(/\s*([\w-]+)?(\([^\)]*\)|\[[^\]]*\])?(.*)$/),o=r[1],n=r[2],c=null===(s=r[3])||void 0===s?void 0:s.trim();return t.includes(o)?{name:o,rangeString:n,query:c}:null}function Wt(e,t){let s=[],r=1;return e.forEach((e=>{s.push({fromColumn:r,toColumn:r+e.content.length-1,token:e}),r+=e.content.length})),t.forEach((e=>{s=function(e,t){const{range:s}=t,{fromColumn:r,toColumn:o}=s,n=[];let c=0;for(;c<e.length&&e[c].toColumn<r;)n.push(e[c]),c++;if(c===e.length)return e;const i={annotationName:t.name,annotationQuery:t.query,fromColumn:r,toColumn:o,tokens:[]},a=e[c];if(a.fromColumn<r){const[e,t]=Dt(a,r);if(n.push(e),n.push(i),t.toColumn>o){const[e,s]=Dt(t,o+1);i.tokens.push(e),n.push(s)}else i.tokens.push(t);c++}else n.push(i);for(;c<e.length&&e[c].toColumn<=o;)i.tokens.push(e[c]),c++;if(c===e.length)return n;const u=e[c];if(u.fromColumn<=o){const[e,t]=Dt(u,o+1);i.tokens.push(e),n.push(t),c++}for(;c<e.length;)n.push(e[c]),c++;return n}(s,e)})),s.map((e=>Ut(e)))}function Ut(e){return"tokens"in e?{annotationName:e.annotationName,annotationQuery:e.annotationQuery,fromColumn:e.fromColumn,toColumn:e.toColumn,tokens:e.tokens.map((e=>Ut(e)))}:e.token}function Dt(e,t){if("token"in e){const s=Object.assign(Object.assign({},e.token),{content:e.token.content.slice(0,t-e.fromColumn)}),r=Object.assign(Object.assign({},e.token),{content:e.token.content.slice(t-e.fromColumn)});return[Object.assign(Object.assign({},e),{toColumn:t-1,token:s}),Object.assign(Object.assign({},e),{fromColumn:t,token:r})]}{const s=[],r=[];e.tokens.forEach((e=>{if(e.toColumn<t)s.push(e);else if(e.fromColumn>=t)r.push(e);else{const[o,n]=Dt(e,t);s.push(o),r.push(n)}}));return[Object.assign(Object.assign({},e),{toColumn:t-1,tokens:s}),Object.assign(Object.assign({},e),{fromColumn:t,tokens:r})]}}function zt(e,t){let s=e.map(((e,t)=>({fromLineNumber:t+1,toLineNumber:t+1,line:e})));return t.forEach((e=>{s=function(e,t){const{range:s,name:r,query:o}=t,{fromLineNumber:n,toLineNumber:c}=s,i=[];let a=0;for(;a<e.length&&e[a].toLineNumber<n;)i.push(e[a]),a++;if(a===e.length)return i;const u={annotationName:r,annotationQuery:o,fromLineNumber:n,toLineNumber:c,lines:[]},l=e[a];if(l.fromLineNumber<n){const[e,t]=Qt(l,n);if(i.push(e),i.push(u),t.toLineNumber>c){const[e,s]=Qt(t,c+1);u.lines.push(e),i.push(s)}else u.lines.push(t);a++}else i.push(u);for(;a<e.length&&e[a].toLineNumber<=c;)u.lines.push(e[a]),a++;if(a===e.length)return i;const d=e[a];if(d.fromLineNumber<=c){const[e,t]=Qt(d,c+1);u.lines.push(e),i.push(t),a++}for(;a<e.length;)i.push(e[a]),a++;return i}(s,e)})),s.map((e=>Ht(e)))}function Ht(e){return"line"in e?{lineNumber:e.fromLineNumber,tokens:e.line.tokens}:{annotationName:e.annotationName,annotationQuery:e.annotationQuery,fromLineNumber:e.fromLineNumber,toLineNumber:e.toLineNumber,lines:e.lines.map((e=>Ht(e)))}}function Qt(e,t){if("line"in e)return[Object.assign(Object.assign({},e),{toLineNumber:t-1}),Object.assign(Object.assign({},e),{fromLineNumber:t})];{const s=[],r=[];return e.lines.forEach((e=>{if(e.toLineNumber<t)s.push(e);else if(e.fromLineNumber>=t)r.push(e);else{const[o,n]=Qt(e,t);s.push(o),r.push(n)}})),[Object.assign(Object.assign({},e),{toLineNumber:t-1,lines:s}),Object.assign(Object.assign({},e),{fromLineNumber:t,lines:r})]}}function Kt(e,t){const{inlineAnnotations:s,multilineAnnotations:r}=function(e){const t=[],s=[];return e.forEach((e=>{e.ranges.forEach((r=>{"lineNumber"in r?t.push(Object.assign(Object.assign({},e),{range:r})):s.push(Object.assign(Object.assign({},e),{range:r}))}))})),{inlineAnnotations:t,multilineAnnotations:s}}(t);return zt(e.map(((e,t)=>{const r=s.filter((e=>e.range.lineNumber===t+1));return{lineNumber:t+1,tokens:Wt(e,r)}})),r)}var Vt=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Yt={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",9:"strikethrough"};function Xt(e,t){const s=e.indexOf("[",t);if(-1!==s){const t=e.indexOf("m",s);return{sequence:e.substring(s+2,t).split(";"),startPosition:s,position:t+1}}return{position:e.length}}function Jt(e,t){let s=1;const r=e[t+s++];let o;if("2"===r){const r=[e[t+s++],e[t+s++],e[t+s]].map((e=>Number.parseInt(e)));3!==r.length||r.some((e=>Number.isNaN(e)))||(o={type:"rgb",rgb:r})}else if("5"===r){const r=Number.parseInt(e[t+s]);Number.isNaN(r)||(o={type:"table",index:Number(r)})}return[s,o]}function Zt(e){const t=[];for(let s=0;s<e.length;s++){const r=e[s],o=Number.parseInt(r);if(!Number.isNaN(o))if(0===o)t.push({type:"resetAll"});else if(o<=9){Yt[o]&&t.push({type:"setDecoration",value:Yt[o]})}else if(o<=29){const e=Yt[o-20];e&&t.push({type:"resetDecoration",value:e})}else if(o<=37)t.push({type:"setForegroundColor",value:{type:"named",name:Vt[o-30]}});else if(38===o){const[r,o]=Jt(e,s);o&&t.push({type:"setForegroundColor",value:o}),s+=r}else if(39===o)t.push({type:"resetForegroundColor"});else if(o<=47)t.push({type:"setBackgroundColor",value:{type:"named",name:Vt[o-40]}});else if(48===o){const[r,o]=Jt(e,s);o&&t.push({type:"setBackgroundColor",value:o}),s+=r}else 49===o?t.push({type:"resetBackgroundColor"}):o>=90&&o<=97?t.push({type:"setForegroundColor",value:{type:"named",name:Vt[o-90+8]}}):o>=100&&o<=107&&t.push({type:"setBackgroundColor",value:{type:"named",name:Vt[o-100+8]}})}return t}function es(e,t){const s=function(){let e=null,t=null,s=new Set;return{parse(r){const o=[];let n=0;do{const c=Xt(r,n),i=c.sequence?r.substring(n,c.startPosition):r.substring(n);if(i.length>0&&o.push({value:i,foreground:e,background:t,decorations:new Set(s)}),c.sequence){const r=Zt(c.sequence);for(const o of r)"resetAll"===o.type?(e=null,t=null,s.clear()):"resetForegroundColor"===o.type?e=null:"resetBackgroundColor"===o.type?t=null:"resetDecoration"===o.type&&s.delete(o.value);for(const o of r)"setForegroundColor"===o.type?e=o.value:"setBackgroundColor"===o.type?t=o.value:"setDecoration"===o.type&&s.add(o.value)}n=c.position}while(n<r.length);return o}}}(),r=e.split(/\r?\n|\r/g).map((e=>function(e,t,s){const r=e.parse(t),o=r.map((({value:e,foreground:t,background:r,decorations:o})=>{const n=ts(t,s),c={};n&&(c.color=n);const i=ts(r,s);return i&&(c.background=i),o.has("bold")&&(c.fontWeight="bold"),o.has("italic")&&(c.fontStyle="italic"),o.has("underline")&&(c.textDecoration="underline"),o.has("strikethrough")&&(c.textDecoration="line-through"),o.has("reverse")&&(c.color=i,c.background=n),o.has("dim")&&(c.opacity=.5),{content:e,style:c}}));return o}(s,e,t)));return r}function ts(e,t){if(e){if("named"===e.type){return u(t,"terminal.ansi"+(e.name[0].toUpperCase()+e.name.slice(1)))}if("rgb"===e.type){const[t,s,r]=e.rgb;return`rgb(${t}, ${s}, ${r})`}}}async function ss(e,t){await Promise.all([vt(e),m(t)])}async function rs(e,t,s="dark-plus",r={}){const o=e||"",n=t||"text";if("string"!=typeof o)throw new Error("Syntax highlighter error: code must be a string");if("string"!=typeof n)throw new Error("Syntax highlighter error: lang must be a string");return await ss([n],s),os(o,n,s,r)}function os(e,t,s="dark-plus",r={}){const o=e||"",n=t||"text";if("string"!=typeof o)throw new Error("Syntax highlighter error: code must be a string");if("string"!=typeof n)throw new Error("Syntax highlighter error: lang must be a string");const{langId:c,grammar:i}=Ct(n),l=f(s),d="text"==c?Nt(o):"terminal"==c?es(o,l):(null==r?void 0:r.scopes)?function(e,t,s){return xt.setTheme(s),_t(e,t,xt.getColorMap())}(o,i,l):At(o,i,l),h="terminal"==c?function(e){return{color:u(e,"terminal.foreground"),background:u(e,"terminal.background"),colorScheme:a(e)}}(l):{color:l.foreground,background:l.background,colorScheme:a(l)};if(function(e){return"annotations"in e}(r)){return{lines:Kt(d,(null==r?void 0:r.annotations)||[]),lang:c,style:h}}return{lines:d,lang:c,style:h}}async function ns(e,t,s){if(!s)return{code:e,annotations:[]};await vt([t]);const{grammar:r,langId:o}=Ct(t),{newCode:n,annotations:c}=qt(e,r,o,s);return{code:n,annotations:c}}async function cs(e){if(!e)throw new Error("Syntax highlighter error: undefined theme");await ss([],e);return _(f(e))}function is(e){if(!e)throw new Error("Syntax highlighter error: undefined theme");return _(f(e))}export{k as LANG_NAMES,b as THEME_NAMES,jt as UnknownLanguageError,y as UnknownThemeError,ns as extractAnnotations,cs as getThemeColors,is as getThemeColorsSync,rs as highlight,os as highlightSync,ss as preload};
